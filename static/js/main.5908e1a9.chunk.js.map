{"version":3,"sources":["img/settings.png","img/ruletag.png","img/plus.png","rulestore.js","storage.js","utilities.js","savepanel.js","rulespanel.js","modalmenu.js","pickerpanel.js","editeventmodal.js","packagetour.js","App.js","events.js","serviceworker.js","index.js","img/trashcan.png"],"names":["module","exports","rulesMap","Map","updateCondition","rule","value","parseFloat","condition","argValue","get","text","set","a","b","toFixed","ALLOWED_TYPES","loadResources","resourceList","window","localStorage","getItem","parseJSON","JSON","parse","_","Array","loadEvents","eventList","map","event","start","Date","end","loadShifts","shiftList","loadMetaData","metaData","archive","resources","shifts","rules","tutorial","done","stepIndex","storeData","data","type","includes","TypeError","setItem","stringify","saveBlob","allData","events","created","Blob","moment","extendMoment","Moment","timePad","number","toString","length","shiftComparer","first","second","startHour","startMinute","resourceComparer","title","toLowerCase","sortComparer","Error","SavePanel","undefined","this","props","loadingError","style","background","borderRadius","border","padding","message","error","className","loadErrorPanel","href","URL","createObjectURL","download","width","id","accept","onChange","preventDefault","target","files","then","blob","err","loadBlob","setLoadingError","insert","closeModal","height","opacity","overflow","position","zIndex","htmlFor","Component","RulesPanel","renderOptions","list","results","forEach","ruleText","i","push","key","keys","entry","state","rulesList","color","newRules","setRules","onSave","newValue","onValidate","isNaN","validationMessage","saveButtonLabel","cancelButtonLabel","onHoverCssClass","animation","onClose","argColor","enableAlpha","textValues","onClick","splice","showTimer","isExecuting","src","trashcan","alt","ModalMenu","randomColor","Math","random","renderResources","optionsList","resource","updateElement","display","addResourceRow","textAlign","marginTop","create","addBubble","renderShifts","shiftOptions","shift","time","onFocusChange","focus","setState","timePickerOpen","onTimeChange","hour","minute","replacement","update","$set","withoutIcon","focused","trigger","e","minuteLength","Fragment","addShiftRow","addRuleRow","arg","picked","flexWrap","newData","advanceTutorial","bottom","right","packageJson","version","ShiftInfoBlock","stop","setHours","add","toDate","fromTo","getHours","getMinutes","PickerPanel","matchId","selected","setSelected","fontStyle","cursor","whiteSpace","res","margin","boxShadow","setOptionsModal","optionsIcon","EditEventModal","generalErrorPanel","dateTimePicker","dt","mindate","newMoment","isAfter","dateError","isBefore","minStep","hourStep","prevMonthIcon","nextMonthIcon","getFullYear","getMonth","getDate","optionsTable","startChoosing","endChoosing","eventColor","choice","buttonsPanel","justifyContent","marginBottom","titleValue","customTitle","previousTitle","titleInput","onSubmit","ev","editEvent","resourceId","shiftId","addEvent","titleError","fontWeight","ref","instance","placeholder","newError","PackageTour","steps","content","placement","hideFooter","spotlightClicks","hideCloseButton","ruleTag","float","marginRight","hideBackButton","disableOverlay","disableBackButton","offset","handleCallback","setStep","index","action","console","log","disableOverlayClose","showSkipButton","locale","next","skip","last","back","callback","disableBeacon","continuous","run","localizer","momentLocalizer","DragCalendar","withDragAndDrop","Calendar","App","newElement","findIndex","elem","newList","$splice","newEventList","sort","optionsModalOpen","editEventModalOpen","view","viewDate","pickerPanel","parentState","newStep","isOpen","shouldCloseOnOverlayClick","overlayClassName","onAfterOpen","document","getElementById","filter","onRequestClose","ariaHideApp","element","argElement","ele","concat","find","slice","newId","newElementList","newMetaData","newEvent","eventId","eventBasis","resizableAccessor","startAccessor","endAccessor","onDrillDown","date","onEventDrop","eventObj","idx","isAllDay","updatedEvent","nextEvents","moveEvent","onDragStart","onSelectSlot","selection","allSelected","newEvents","slots","slot","selectedShift","startDate","allDay","addEvents","onDoubleClickEvent","resolvedColor","resolvedTitle","sh","defaultView","defaultDate","eventPropGetter","isSelected","getEventProp","selectable","views","onView","onNavigate","newDate","step","popup","components","eventWrapper","children","onContextMenu","args","eventRender","dateCellWrapper","cellProps","calendarDay","endOf","scheduledHours","firstRange","range","secondRange","overlaps","intersect","valueOf","timeOverlap","tag","round","flex","borderLeft","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","process","origin","addEventListener","fetch","response","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.5908e1a9.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFUAAABCCAYAAAAmJpp5AAADWUlEQVR4nO3ZQW6jMBQGYB8EqT0K6qZHmDkAWXcz95idr9AzsGUzi65GVVRFaiqUkVI1YTFUEzW7fxY0wRib2IgXTPp+yYuCFcyH/UxSAY8sl0uf7l82wqczo7qFUQnCqARhVIIwKkEYlSCMShBGJQijEoRRCcKoBGFUgjAqQRiVIIxKELFcLsFt2OY9U9frddBts9lQTUDnXBzqer2msnIOoxKEUQnCqASZFqqMIUQMGTqqEAJqu723d7ahZkkEEUv7uePnR0iybpDO/lNB7ULUo6PKWHkgBtQKqEbQ//buf/Goyg3K2IQqEQuBWKrHMiSRQJRkBgyH/lNBvXty72xb/kZUC4D5ATj2P/TJEkRKyWo+iABQXesp4IeaJRFElCAzLfG+x2VcjVXpZyopY6fe/e9ve29U50XVN7t22Rg7jVeqp7sriKs72CpCGKh6ifhCqKQ1dUqo97ei83XACzVLELWWarWb6xuLc//JoQ5cU4/H9U1F+Vs/f6r/ZFDr3f8Kp16vfFGP5w7X0Gqmjniqvwvq6+vreeQ6Mq3v/g6tKAoqK+dcHOp+v6eycs5Fob6/v1M5eeUiUIuiwMfHB5WRd3r/i7pMC7x8/43H64yb1nqh/vmxGH3gITdv1DItRh906M0b9eUbL/nBUcce8BQaozLqNNrwqDcr7AGUM/3cHCW2yK8zPM62AHbY3NDcVJ62x76XD8q5z3EY2xyl0j8I1DwFynQLpHM7KnHLUzvKAdx2fiF3nedHQD3AmQDDQS3TLfC8wsI4/h3KdBcQ6qyeoe0bU1F14AdsntUrqf3qtEtKT9RZdT398xZyB6RzLGRAqNWAFeDGbLChfoIq5WIhV8g/j9c3V80ilzp8GtU0vgdsnqvPDwf1ZoV9Y/bpCBbU2RbGjaN1091YOlwz9TjqB6/NVuV6waAeCnwrxxnYgWqqb7Ot8eNcUU/OVGW568CBoJprVHMW9kA1biYDLX91NcnmtcJAbS19E7atprbfC6ua2vG+aL2eL2q9wvRjZ0U1/aCSpzC8l+pLrGv3b+7y9azRjquz23I9X1TTAzo7agg//eUp3bexIVqvH6nffuajDzzk1vvfKf9+/eXfVodG5djDqARhVIIwKkEYlSCMShBGJQijEuQ/2R8dRIwm4VcAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAg0HFhzEfYeUAAADIklEQVRo3sWZz08TQRTHP10b0YB08WTrAaIehZDij5r4R5gY4hXwRA2RcCESTDgZFENo1DvxR2IRf9yBCxzsQQsBLxIUPAhcqNuCJ5T1sGwKMvtjtrvd9y7tTmc+332zfTvzJoKsJUjSRisJYqjEgCIaRX6yQJ4869IjurbLPGYN3cFXGeGS3+gYg3xzRB/0FQaJ+QOvo5+CFNz0EsOolcEjpD3CTS+QJuIV38R0RXDT57jgBX+bki94YzK6ZEM/5Bvc9AyKW3wNr3zH6+hMctIdfiYQvI7ONDXOwX8RGF5HJ+s0ESOB4nV0hu2f/KDxOjqdh0NetiYWOeXyQf3NGF/4u//tGBfppdZl321aWBPNvvuHb5fUkf4pdl33nxFlx7REEOeEdzYrMUL6/871bEl0nxAKyEqM8Mt8TZl/il5Ou5xBf0yl56CAGL1VxQP0GTEwBPTQUHUBKnfKAjqqjgfoImIIuML5UAScI2kIuBUKHoOsADdDE9AOCmdpDE1AE3GFZGh4gGTUVsAfPrIpuJ4T/jonXP/GSRG1FgAfLNPltuCV48VS7Fgy3imcseyYsbhTWcuRsWyLKzZ7lyVf8ACLli2qYpOE93wTYD2Sqvi1hfRoDQp6qAL2FIqhCtAUNMtG11spR7MeqWgnoNk3AS3WEYD3lklipwqJ6G2UeW5YdKxljhwbgpYco4KrfULBCa7apOKFKHkb7VGuS91pu3R0Piu2AoK3vMK6aJtUJVtlUwEmQxMwYfxDs6EJyBoCPrESCn6ZeTNHjYciYBxMAU8oVB1f4GlZQMlmzRKUjbJdFgBjVY6BxjPjgymgxH2J7nHh1YTECANHX4KVlmiuSZRopssLeO9FqgxLB4pUzdx1XaQq0cIPcVNXQIW5w95hp+5h4PgH9uGJ8DxQ/GvnhV6NT8cUIp9yLlYDHOdlIPg3nHD5mIZ9YGFYp49HNkVvZbBGpnzBz3o7tDKmoluqhHvUt+j2fmxnWB39HkVsMVTpwaVp9QywLAX/yj3Xad21tfGIVUf0dx7KFL7k5ydOkiStJFBRUQENDY31/eP7Dbnh/gG979F//hqDMwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wMi0xM1QwNzoyMjoyOCswMDowMIZmOQwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDItMTNUMDc6MjI6MjgrMDA6MDD3O4GwAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\"","let rulesMap = new Map()\r\n\r\nrulesMap.set('>', (a, b) => { return a > b })\r\nrulesMap.set('<', (a, b) => { return a < b })\r\nrulesMap.set('>=', (a, b) => { return a >= b })\r\nrulesMap.set('<=', (a, b) => { return a <= b })\r\nrulesMap.set('=', (a, b) => { return parseFloat(a).toFixed(1) === parseFloat(b).toFixed(1) })\r\n\r\nfunction updateCondition(rule) {\r\n  rule.value = parseFloat(rule.value)\r\n  rule.condition = argValue => {\r\n    return rulesMap.get(rule.text)(argValue, rule.value)\r\n  }\r\n  return rule\r\n}\r\n\r\nexport {\r\n  rulesMap,\r\n  updateCondition,\r\n}\r\n","import { updateCondition } from './rulestore'\r\n\r\nconst ALLOWED_TYPES = [ 'shifts', 'events', 'resources', 'metaData' ]\r\n\r\n\r\n// A resource in this case is just a person\r\nfunction loadResources(resourceList = window\r\n\t\t       .localStorage\r\n\t\t       .getItem('schedule_resources'),\r\n\t\t       parseJSON = true) {\r\n\r\n  try {\r\n    if (parseJSON) resourceList = JSON.parse(resourceList)\r\n\r\n    // in case there are no resources stored at all\r\n    if (!resourceList) return []\r\n  }\r\n  catch(_) { return [] }\r\n\r\n  if (!resourceList instanceof Array) { return [] }\r\n  else return resourceList\r\n}\r\n\r\nfunction loadEvents(eventList = window\r\n\t\t    .localStorage\r\n\t\t    .getItem('schedule_events'),\r\n\t\t    parseJSON = true) {\r\n\r\n  try {\r\n    if (parseJSON) eventList = JSON.parse(eventList)\r\n\r\n    // The dates get stored as strings and the parsing\r\n    // doesn't turn them back into date objects automatically\r\n    eventList = eventList.map(event => {\r\n      event.start = new Date(event.start)\r\n      event.end = new Date(event.end)\r\n      return event\r\n    })\r\n  }\r\n\r\n  catch(_) { return [] }\r\n\r\n  if (!eventList instanceof Array) { return [] }\r\n  else return eventList\r\n}\r\n\r\nfunction loadShifts(shiftList = window\r\n\t\t    .localStorage\r\n\t\t    .getItem('schedule_shifts'),\r\n\t\t    parseJSON = true) {\r\n\r\n  if (!shiftList) return []\r\n\r\n  try { if(parseJSON) shiftList = JSON.parse(shiftList) }\r\n  catch(_) { return [] }\r\n\r\n  if (!shiftList instanceof Array) { return [] }\r\n  else return shiftList\r\n}\r\n\r\nfunction loadMetaData(metaData = window\r\n\t\t      .localStorage\r\n\t\t      .getItem('schedule_metaData'),\r\n\t\t      parseJSON = true) {\r\n\r\n  try {\r\n    if (parseJSON) metaData = JSON.parse(metaData)\r\n\r\n    if (!metaData.archive.resources)\r\n      metaData.archive.resources = []\r\n\r\n    if (!metaData.archive.shifts)\r\n      metaData.archive.shifts = []\r\n\r\n    if (!metaData.rules)\r\n      metaData.rules = []\r\n\r\n    if (!metaData.tutorial || metaData.tutorial.done !== true)\r\n      metaData.tutorial = {\r\n\tdone: false,\r\n\tstepIndex: 0,\r\n      }\r\n  }\r\n  catch(_) {\r\n    return {\r\n      archive: {\r\n\tresources: [],\r\n\tshifts: [],\r\n      },\r\n      rules: [],\r\n      tutorial: {\r\n\tdone: false,\r\n\tstepIndex: 0,\r\n      },\r\n    }\r\n  }\r\n\r\n  metaData.rules = metaData.rules.map(rule => {\r\n    rule.value = parseFloat(rule.value)\r\n    rule = updateCondition(rule)\r\n    return rule\r\n  })\r\n\r\n  return metaData\r\n}\r\n\r\n// type = 'resources' | 'shifts' | 'metaData' | 'events'\r\nfunction storeData(data, type) {\r\n  if (!ALLOWED_TYPES.includes(type)) {\r\n    throw new TypeError('Invalid type: ', type)\r\n  }\r\n      \r\n  window.localStorage\r\n    .setItem(`schedule_${type}`, JSON.stringify(data))\r\n}\r\n\r\n// a blob with all data that is saved in the localStorage\r\n// meant for the save-to-file anchor tag\r\nfunction saveBlob() {\r\n  const allData = {\r\n    metaData: loadMetaData(),\r\n    shifts: loadShifts(),\r\n    events: loadEvents(),\r\n    resources: loadResources(),\r\n    created: new Date(),\r\n  }\r\n\r\n  return new Blob([JSON.stringify(allData)],\r\n\t\t  { type: 'json' })\r\n}\r\n\r\nfunction loadBlob(blob) {\r\n  try {\r\n    blob = JSON.parse(blob)\r\n    blob.resources = loadResources(blob.resources, false)\r\n    blob.shifts = loadShifts(blob.shifts, false)\r\n    blob.events = loadEvents(blob.events, false)\r\n    blob.metaData = loadMetaData(blob.metaData, false)\r\n  }\r\n  catch(err) { return undefined  }\r\n\r\n  storeData(blob.resources, 'resources')\r\n  storeData(blob.shifts, 'shifts')\r\n  storeData(blob.events, 'events')\r\n  storeData(blob.metaData, 'metaData')\r\n\r\n  blob.created = new Date(blob.created)\r\n\r\n  return blob\r\n}\r\n\r\nexport {\r\n  loadResources,\r\n  loadEvents,\r\n  loadShifts,\r\n  loadMetaData,\r\n  loadBlob,\r\n  storeData,\r\n  saveBlob,\r\n}\r\n","import Moment from 'moment'\r\nimport { extendMoment } from 'moment-range'\r\n\r\nconst moment = extendMoment(Moment)\r\n\r\n// type = 'shifts' | 'resources'\r\nfunction create(element, type, state) {\r\n\r\n  if (!(type === 'resources' || type === 'shifts'))\r\n    throw new TypeError('Invalid type: ', type)\r\n  \r\n\r\n  // make sure that the new ID is unique by making it larger than every other ID\r\n  // including removed resources/shifts since those can still have events tied to them\r\n  let newId = 0\r\n  state[type].forEach(ele => { if (ele.id >= newId) { newId = ele.id }})\r\n  state.metaData.archive[type]\r\n    .forEach(ele => { if (ele.id >= newId) { newId = ele.id }})\r\n  newId++;\r\n\r\n  element.id = newId\r\n\r\n  const newList = state[type].concat(element).sort(sortComparer(type))\r\n\r\n  return {\r\n    newElementList: newList,\r\n    newElement: element,\r\n  }\r\n}\r\n\r\nfunction archive(argElement, type, state) {\r\n\r\n  if (type !== 'resources' && type !== 'shifts')\r\n    throw new TypeError('Invalid type: ', type)\r\n\r\n\r\n  const index = state[type].findIndex(ele => ele.id === argElement.id)\r\n  state.metaData.archive[type] = state.metaData.archive[type].concat(argElement)\r\n  state[type].splice(index, 1)\r\n\r\n  return {\r\n    [type]: state[type],\r\n    metaData: state.metaData,\r\n  }\r\n}\r\n\r\nfunction timePad(number)\r\n{\r\n  if (number.toString().length === 2) return number.toString()\r\n  return (number < 10) ? \"0\" + number : number.toString()\r\n}\r\n\r\nfunction shiftComparer(first, second) {\r\n  if (first.startHour === second.startHour) {\r\n    return first.startMinute - second.startMinute\r\n  }\r\n  \r\n  else return first.startHour - second.startHour\r\n}\r\n\r\nfunction resourceComparer(first, second) {\r\n\r\n  // the same as the default method used by sort()\r\n  return first.title.toLowerCase() > second.title.toLowerCase()\r\n}\r\n\r\nfunction sortComparer(type) {\r\n  if (type === 'resources') return resourceComparer\r\n  else if (type === 'shifts') return shiftComparer\r\n\r\n  else throw new Error('Invalid sort type: ', type)\r\n}\r\n\r\n// overlap time in ms\r\nfunction timeOverlap(first, second) {\r\n  const firstRange = moment.range(first.start, first.end)\r\n  const secondRange = moment.range(second.start, second.end)\r\n\r\n  if (!firstRange.overlaps(secondRange)) return 0\r\n  return firstRange.intersect(secondRange).valueOf()\r\n  \r\n}\r\n\r\nexport {\r\n  create,\r\n  archive,\r\n  timePad,\r\n  sortComparer,\r\n  timeOverlap\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport { saveBlob, loadBlob } from './storage'\r\n\r\nclass SavePanel extends Component {\r\n\r\n  loadErrorPanel() {\r\n    if (this.props.loadingError !== undefined) {\r\n      return (\r\n\t<div\r\n\t  style = {{\r\n\t    background: '#ffa5a5',\r\n\t    borderRadius: '2px',\r\n\t    border: '1px solid #ff7a7a',\r\n\t    padding: '2px',\r\n\t  }}>\r\n\t  { this.props.loadingError.message }\r\n\t  { this.props.loadingError.error }\r\n\t</div>\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className = 'savePanel'>\r\n\t{ this.loadErrorPanel() }\r\n\t<a\r\n\t  href = { URL.createObjectURL(saveBlob()) }\r\n\t  download = 'schedule.json'\r\n\t>\r\n\t  <button\r\n\t    className = 'fileButton'\r\n\t    style = {{\r\n\t      width: '100%',\r\n\t    }}\r\n\t  >\r\n\t    Spara till fil\r\n\t  </button>\r\n\t</a>\r\n\r\n\t<input\r\n\t  type = 'file'\r\n\t  id = 'file'\r\n\t  className = 'inputfile'\r\n\t  accept = '.json'\r\n\t\r\n \t  onChange = { event => {\r\n\t      event.preventDefault()\r\n\t      event.target.files[0].text()\r\n\t\t   .then(data => {\r\n\r\n\t\t     try {\r\n\t\t     // parses from JSON to actual data\r\n\t\t       data = loadBlob(data)\r\n\t\t     }\r\n\t\t     catch (error) {\r\n\t\t       this.props.setLoadingError('Filen är trasig eller tom', error)\r\n\t\t       return\r\n\t\t     }\r\n\r\n\t\t     // in case the user is trying to load a broken or empty file\r\n\t\t     if (!data) {\r\n\t\t       this.props.setLoadingError('Filen är trasig eller tom')\r\n\t\t       return\r\n\t\t     }\r\n\t\t     \r\n\t\t     this.props.insert(data)\r\n\t\t     this.props.closeModal()\r\n\t\t   })\r\n\t  }}\r\n\t\r\n\t  style = {{\r\n\t    width: '0.1px',\r\n\t    height: '0.1px',\r\n\t    opacity: '0',\r\n\t    overflow: 'hidden',\r\n\t    position: 'absolute',\r\n\t    zIndex: '-1',\r\n\t  }}\r\n\t/>\r\n\t<label\r\n\t  htmlFor = 'file'\r\n\t  className = 'fileButton clickable'\r\n\t>\r\n\t  Öppna fil\r\n\t</label>\r\n\t\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default SavePanel\r\n","import React, { Component } from 'react'\r\n\r\nimport ColorPicker from 'rc-color-picker'\r\nimport InlineConfirmButton from 'react-inline-confirm'\r\nimport EasyEdit from 'react-easy-edit'\r\n\r\nimport { rulesMap, updateCondition } from './rulestore'\r\n\r\nimport trashcan from './img/trashcan.png'\r\n\r\nclass RulesPanel extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    let rules = []\r\n    for (let entry of rulesMap.keys())\r\n      rules.push(entry)\r\n    \r\n    this.state = {\r\n      rulesList: rules,\r\n    }\r\n  }\r\n\r\n  renderOptions = list => {\r\n    let results = []\r\n    list.forEach((ruleText, i) => {\r\n\tresults.push((\r\n\t  <option\r\n\t    key = { i }\r\n\t    value = { ruleText }\r\n\t  >\r\n\t    { ruleText }\r\n\t  </option>\r\n\t))\r\n    })\r\n      \r\n    return results\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.rules) return ''\r\n\r\n    return (\r\n      <div className = 'rulesPanel'>\r\n\t{\r\n\t  this.props.rules.map(({ text, color , value }, i) => {\r\n\t    return (\r\n\t      <div key = { i }>\r\n\t\t<select\r\n\t\t  value = { text }\r\n\t\t  onChange = { event => {\r\n\t\t      let newRules = this.props.rules\r\n\t\t      newRules[i].text = event.target.value\r\n\t\t      newRules[i] = updateCondition(newRules[i])\r\n\t\t      this.props.setRules(newRules)\r\n\t\t  }}\r\n\t\t>\r\n\t\t  { this.renderOptions(this.state.rulesList)}\r\n\t\t</select>\r\n\r\n\t\t<EasyEdit\r\n\t\t  type = 'number'\r\n\t\t  value = { parseFloat(value).toFixed(1) }\r\n\t\t  onSave = {\r\n\t\t    newValue => {\r\n\t\t      let newRules = this.props.rules\r\n\t\t      newRules[i].value = newValue\r\n\t\t      this.props.setRules(newRules)\r\n\t\t    }\r\n\t\t  }\r\n\t\t  onValidate = {\r\n\t\t    value => !isNaN(parseFloat(value))\r\n\t\t\t&& parseFloat(value).toFixed(1) >= 0.0\r\n\t\t  }\r\n\t \t  validationMessage = 'Måste vara en siffra >= 0'\r\n\t      \t  saveButtonLabel = 'Spara'\r\n\t\t  cancelButtonLabel = 'Avbryt'\r\n\t\t  onHoverCssClass = 'clickable'\r\n\t\t/>\r\n\r\n\t\t<ColorPicker\r\n\t\t  animation = 'slide-up'\r\n\t\t  color = { color }\r\n\t\t  onClose = { argColor => {\r\n\t\t      let newRules = this.props.rules\r\n\t\t      newRules[i].color = argColor.color\r\n\t\t      this.props.setRules(newRules)\r\n\t\t  }}\r\n\t\t  enableAlpha = { false }\r\n\t\t/>\r\n\r\n\t\t<InlineConfirmButton\r\n\t\t  className = \"confirmButton\"\r\n\t\t  textValues = {['', 'Ta bort?', '']}\r\n\t\t  onClick = { () => {\r\n\t\t      let newRules = this.props.rules\r\n\t\t      newRules.splice(i, 1)\r\n\t\t      this.props.setRules(newRules)\r\n\t\t  }}\r\n\t\t  showTimer\r\n\t\t  isExecuting = { false }\r\n\t\t>\r\n\t\t  <img\r\n\t\t    src = { trashcan }\r\n\t\t    alt = \"[Delete]\"\r\n\t\t    className = \"clickable\"\r\n\t\t    style = {{\r\n\t\t      height: '17px'\r\n\t\t    }}\r\n\t\t  />\r\n\t\t  \r\n\t\t</InlineConfirmButton>\r\n\t      </div>\r\n\t    )\r\n\t    \r\n\t  })\r\n\t}\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default RulesPanel\r\n","import React, { Component } from 'react'\r\nimport update from 'immutability-helper'\r\n\r\nimport EasyEdit from 'react-easy-edit'\r\nimport InlineConfirmButton from 'react-inline-confirm'\r\n\r\nimport ColorPicker from 'rc-color-picker'\r\nimport 'rc-color-picker/assets/index.css'\r\n\r\nimport TimePicker from 'react-times'\r\nimport 'react-times/css/material/default.css'\r\n\r\nimport { timePad } from './utilities'\r\nimport { updateCondition } from './rulestore'\r\n\r\nimport trashcan from './img/trashcan.png'\r\nimport addBubble from './img/plus.png'\r\n\r\nimport './modalmenu.css'\r\n\r\nimport SavePanel from './savepanel'\r\nimport RulesPanel from './rulespanel'\r\nimport packageJson from '../package.json'\r\n\r\nclass ModalMenu extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      picked : {\r\n\thour: 0,\r\n\tminute: 0,\r\n      },\r\n      timePickerOpen: false,\r\n      shifts: this.props.shifts,\r\n      time: {\r\n\thour: 21,\r\n\tminute: 5,\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  randomColor = () => { return \"#\"+((1<<24)*Math.random()|0).toString(16) }\r\n\r\n  renderResources = () => {\r\n\r\n    let optionsList = (\r\n      this.props.resources.map((resource, i) => {\r\n\treturn (\r\n\t  <div className = \"option\" key = { i }>\r\n\t    <EasyEdit\r\n\t      type = \"text\"\r\n\t      value = { resource.title  }\r\n\t      onSave = {\r\n\t\ttext => {\r\n\t\t  resource.title = text\r\n\t\t  this.props.updateElement(resource, 'resources')\r\n\t\t}}\r\n\t      onValidate = { text => text.length > 0 }\r\n\t      validationMessage = \"Namnet kan inte vara tomt\"\r\n\r\n\t      saveButtonLabel = \"Spara\"\r\n\t      cancelButtonLabel = \"Avbryt\"\r\n\t      onHoverCssClass = \"clickable\"\r\n\t    />\r\n\t    <div className = \"optionSidePanel\">\r\n\t      <div style={{ display: \"inline-table\" }}>\r\n\t\t<ColorPicker\r\n\t\t  animation = \"slide-up\"\r\n\t\t  color = { resource.color }\r\n\t\t  onClose = { color => {\r\n\t\t      resource.color = color.color\r\n\t\t      this.props.updateElement(resource, 'resources')\r\n\t\t  }}\r\n\t\t  enableAlpha = { false }\r\n\t\t/>\r\n\t      </div>\r\n\r\n\t      <InlineConfirmButton\r\n\t\tclassName = \"confirmButton\"\r\n\t\ttextValues = {['', 'Ta bort?', '']}\r\n\t\tonClick = { () => this.props.archive(resource, 'resources') }\r\n\t\tshowTimer\r\n\t\tisExecuting = { false }\r\n\t      >\r\n\t\t<img\r\n\t\t  src = { trashcan }\r\n\t\t  alt = \"[Delete]\"\r\n\t\t  className = \"clickable\"\r\n\t\t/>\r\n\t      </InlineConfirmButton>\r\n\t    </div>\r\n\t  </div>\r\n\t)\r\n      })\r\n    )\r\n\r\n    const addResourceRow = (\r\n      <div\r\n\tstyle = {{\r\n\t  textAlign: 'center',\r\n\t  marginTop: '5px',\r\n\t}}\r\n\tonClick = { () => {\r\n\t    this.props.create({\r\n\t      title: 'Person',\r\n\t      color: this.randomColor(),\r\n\t    }, 'resources')\r\n\t}}\r\n\tclassName = \"clickable\"\r\n\tkey = { optionsList.length }\r\n      >\r\n\t<img\r\n\t  src = { addBubble }\r\n\t  alt = \"Lägg till\"\r\n\t  style = {{ height: '20px' }}\r\n\t/>\r\n      </div>\r\n    )\r\n\r\n    optionsList.push(addResourceRow)\r\n    return optionsList\r\n  }\r\n\r\n  renderShifts = () => {\r\n    let shiftOptions = (\r\n      this.props.shifts.map((shift, i) => {\r\n\treturn (\r\n\t  <tr key = { i }>\r\n\t    <td>\r\n\t      <EasyEdit\r\n\t\ttype = \"text\"\r\n\t\tvalue = { shift.title }\r\n\t\tonSave = {\r\n\t\t  text => {\r\n\t\t    if (text.length === 0)\r\n\t\t      return\r\n\t\t    \r\n\t\t    shift.title = text\r\n\t\t    this.props.updateElement(shift, 'shifts')\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\tonValidate = { text => text.length > 0 }\r\n\t\tvalidationMessage = \"Namnet kan inte vara tomt\"\r\n\t      \r\n\t\tsaveButtonLabel = \"Spara\"\r\n\t\tcancelButtonLabel = \"Avbryt\"\r\n\t\tonHoverCssClass = \"clickable\"\r\n\t      />\r\n\t    </td>\r\n\r\n\t    <td>\r\n\t      <TimePicker\r\n\t\ttime = { shift.startHour + ':' + shift.startMinute }\r\n\t\tonFocusChange = { focus => {\r\n\t\t  // this only triggers when the picker closes for some reason\r\n\t\t    this.setState({\r\n\t\t      timePickerOpen: false,\r\n\t\t    })\r\n\t\t}}\r\n\t      \r\n\t\tonTimeChange = { ({hour, minute}) => {\r\n\t\t    const replacement = update(shift, {\r\n\t\t      startHour: {$set: hour},\r\n\t\t      startMinute: {$set: minute}\r\n\t\t    })\r\n\r\n\t\t    this.props.updateElement(replacement, 'shifts')\r\n\t\t}}\r\n\t      \r\n\t\twithoutIcon\r\n\t\tfocused = { this.state.timePickerOpen === shift.id }\r\n\t\ttrigger = {(\r\n\t\t    <div\r\n\t\t    onClick = { e => {\r\n\t\t\tthis.setState({\r\n\t\t\t  timePickerOpen: shift.id,\r\n\t\t\t})\r\n\t\t    }}\r\n\t\t\t      className = \"clickable\"\r\n\t\t      >\r\n\t\t      {\r\n\t\t\t`${timePad(shift.startHour)}:`\r\n\t\t\t+ `${timePad(shift.startMinute)}`\r\n\t\t      }\r\n\t\t    </div>\r\n\t\t)}\r\n\t      />\r\n\t    </td>\r\n\t    \r\n\t    <td>\r\n\t      <EasyEdit\r\n\t\ttype = \"number\"\r\n\r\n\t\tvalue = {\r\n\t\t  // the component throws an error unless\r\n\t\t  // supplied with a string\r\n\t\t  shift.minuteLength.toString()\r\n\t\t}\r\n\r\n\t      onSave = {\r\n\t\tvalue => {\r\n\t\t  shift.minuteLength = value\r\n\t\t  this.props.updateElement(shift, 'shifts')\r\n\t\t}}\r\n\t      \r\n\t\tonValidate = { value => value > 0 }\r\n\t\tvalidationMessage = \"Måste vara en siffra > 0\"\r\n\r\n\t\tsaveButtonLabel = \"Spara\"\r\n\t\tcancelButtonLabel = \"Avbryt\"\r\n\t\tonHoverCssClass = \"clickable\"\r\n\t      />\r\n\t    </td>\r\n\r\n\t    <td>\r\n\t      <div className = \"optionSidePanel\">\r\n\t\t<InlineConfirmButton\r\n\t\t  className = \"confirmButton\"\r\n\t\t  textValues = {['', 'Ta bort?', '']}\r\n\t\t  onClick = { () => this.props.archive(shift, 'shifts') }\r\n\t\t  showTimer\r\n\t\t  isExecuting = { false }\r\n\t\t>\r\n\t\t  <img\r\n\t\t    src = { trashcan }\r\n\t\t    alt = \"[Delete]\"\r\n\t\t    className = \"clickable\"\r\n\t\t  />\r\n\t\t  \r\n\t\t</InlineConfirmButton>\r\n\t      </div>\r\n\t    </td>\r\n\t  </tr>\r\n\t)\r\n      })\r\n    )\r\n\r\n    return (\r\n      <React.Fragment>\r\n\t{ shiftOptions }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  addShiftRow = () => {\r\n    return (\r\n      <div\r\n\tstyle = {{\r\n\t  textAlign: 'center',\r\n\t  marginTop: '5px',\r\n\t}}\r\n\tonClick = { () => this.props.create(\r\n\t    {\r\n\t      title: 'Pass',\r\n\t      startHour: 8,\r\n\t      startMinute: 0,\r\n\t      minuteLength: 480,\r\n\t    }, 'shifts')\r\n\t}\r\n\tclassName = \"clickable\"\r\n      >\r\n\t<img\r\n\t  src = { addBubble }\r\n\t  alt = \"Lägg till\"\r\n\t  style = {{ height: '20px' }}\r\n\t/>\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  addRuleRow = () => {\r\n    return (\r\n      <div\r\n\tstyle = {{\r\n\t  textAlign: 'center',\r\n\t  marginTop: '5px',\r\n\t}}\r\n\tonClick = { arg => {\r\n\t    let newRules = this.props.rules\r\n\t    newRules.push({\r\n\t      text: '=',\r\n\t      value: '8.0',\r\n\t      color: this.randomColor(),\r\n\t    })\r\n\t    newRules[newRules.length-1] = updateCondition(newRules[newRules.length-1])\r\n\t    this.props.setRules(newRules)\r\n\t}}\r\n\tclassName = \"clickable\"\r\n      >\r\n\t<img\r\n\t  src = { addBubble }\r\n\t  alt = \"Lägg till\"\r\n\t  style = {{ height: '20px' }}\r\n\t/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {   \r\n    return (\r\n      <div style = {{\r\n\tdisplay: 'flex',\r\n\tflexWrap: 'wrap',\r\n      }}>\r\n\t<div id =\"closeBubble\" onClick = { this.props.closeModal }>\r\n\t  <div className = 'bubbleCenter'>\r\n\t    X\r\n\t  </div>\r\n\t</div>\r\n\t<div className = \"modalPanel\">\r\n\t  <div className = \"boxLabel\">Resurser</div>\r\n\t  <div className = \"pickerBox\">\r\n\t    { this.renderResources() }\r\n\t  </div>\r\n\t</div>\r\n\r\n\t<div className = \"modalPanel\">\r\n\t  <div className = \"boxLabel\">Pass</div>\r\n\t  <div className = \"pickerBox\">\r\n\t    <table className = \"panelTable\">\r\n\t      <thead>\r\n\t\t<tr>\r\n\t\t  <th style = {{textAlign: \"left\" }}>Namn</th>\r\n\t\t  <th style = {{textAlign: \"center\" }} >Start</th>\r\n\t\t  <th>Längd (min)</th>\r\n\t\t  <th></th>\r\n\t\t</tr>\r\n\t      </thead>\r\n\t      <tbody>\r\n\t\t{ this.renderShifts() }\r\n\t      </tbody>\r\n\t    </table>\r\n\t    { this.addShiftRow() }\r\n\r\n\t  </div>\r\n\t</div>\r\n\r\n\t<div className = \"modalPanel\">\r\n\t  <div className = \"boxLabel\">Lagring</div>\r\n\t  <div className = \"pickerBox\">\r\n\t    <SavePanel\r\n\t      insert = { newData => this.props.insert(newData) }\r\n\t      closeModal = { this.props.closeModal }\r\n\t      setLoadingError = { (message, error) => {\r\n\t\t  this.setState({\r\n\t\t    loadingError: {\r\n\t\t      message: message,\r\n\t\t      error: error,\r\n\t\t    }\r\n\t\t  })\r\n\t      }}\r\n\t      loadingError = { this.state.loadingError }\r\n\t    />\r\n\t  </div>\r\n\t</div>\r\n\r\n\t<div className = \"modalPanel\">\r\n\t  <div className = \"boxLabel\">Regler</div>\r\n\t  <div className = \"pickerBox\">\r\n\t    <RulesPanel\r\n\t      rules = { this.props.rules }\r\n\t      setRules = { newRules => {\r\n\t\t  this.props.advanceTutorial()\r\n\t\t  this.props.setRules(newRules)\r\n\t      }}\r\n\t    />\r\n\t    { this.addRuleRow() }\r\n\t  </div>\r\n\t</div>\r\n\r\n\t<div\r\n\t  style = {{\r\n\t    position: 'absolute',\r\n\t    bottom: '3px',\r\n\t    right: '3px',\r\n\t    background: 'none',\r\n\t    padding: '0px 3px 0px 3px',\r\n\t    color: '#c3bebe',\r\n\t  }}\r\n\t>\r\n\t  { packageJson.version }\r\n\t</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default ModalMenu\r\n","import React, { Component } from 'react'\r\nimport update from 'immutability-helper'\r\nimport moment from 'moment'\r\n\r\nimport optionsIcon from './img/settings.png'\r\n\r\nimport { timePad } from './utilities'\r\n\r\nclass PickerPanel extends Component {\r\n\r\n  matchId(id, type) {\r\n    if (this.props.selected\r\n\t&& this.props.selected[type]\r\n\t&& this.props.selected[type].id !== undefined) {\r\n      return id === this.props.selected[type].id\r\n    }\r\n      \r\n  }\r\n  \r\n  renderShifts = () => {\r\n\r\n    if (!this.props.shifts || this.props.shifts.length === 0)\r\n      return (\r\n\t<div\r\n\t  style = {{\r\n\t    fontStyle: 'italic',\r\n\t    color: '#878787',\r\n\t    textAlign: 'center',\r\n\t    cursor: 'default',\r\n\t    whiteSpace: 'nowrap',\r\n\t  }}\r\n\t>\r\n\t  Inga skift tillagda\r\n\t</div>\r\n      )\r\n    \r\n    else return (\r\n      this.props.shifts.map((shift, i) => {\r\n\treturn (\r\n\t  <div\r\n\t    className =\r\n\t    {\r\n\t      `${this.matchId(shift.id, 'shift') ? ' selected' : ''}`\r\n\t      + ' option clickable'\r\n\t    }\r\n\t    onClick = {() => {\r\n\t\t\r\n\t\tthis.setState({\r\n\t\t  selected: update(this.props.selected, { shift: {$set: shift}})\r\n\t\t})\r\n\t\t\r\n\t\tthis.props.setSelected({\r\n\t\t  shift: shift,\r\n\t\t  resource: this.props.selected.resource\r\n\t\t})\r\n\t    }}\r\n\t    key = { i } >\r\n\t    <div className = \"shiftTitle\">{ shift.title }</div>\r\n\t    <ShiftInfoBlock className = \"shiftInfo\" shift = { shift } />\r\n\t  </div>\r\n\t)\r\n\t\r\n      })\r\n    )\r\n  }\r\n\r\n  renderResources = () => {\r\n\r\n    if (!this.props.resources || this.props.resources.length === 0)\r\n      return (\r\n\t<div\r\n\t  style = {{\r\n\t    fontStyle: 'italic',\r\n\t    color: '#878787',\r\n\t    textAlign: 'center',\r\n\t    cursor: 'default',\r\n\t    whiteSpace: 'nowrap',\r\n\t  }}\r\n\t>\r\n\t  Inga resurser tillagda\r\n\t</div>\r\n      )\r\n    \r\n    else return (\r\n      this.props.resources.map((res, i) => {\r\n\treturn (\r\n\t  <div\r\n\t    className =\r\n\t    {\r\n\t      `${this.matchId(res.id, 'resource') ? ' selected' : ''}`\r\n\t      + ' option clickable'\r\n\t    }\r\n\t    \r\n\t    onClick = {() => {\r\n\t\tthis.setState({\r\n\t\t  selected: update(this.props.selected, { resource: {$set: res}})\r\n\t\t})\r\n\r\n\t\tthis.props.setSelected({\r\n\t\t  shift: this.props.selected.shift,\r\n\t\t  resource: res,\r\n\t\t})\r\n\t    }}\r\n\t    key = { i } >\r\n\t    <div>{ res.title }</div>\r\n\t    <div\r\n\t      style = {{\r\n\t\twidth: '15px',\r\n\t\tbackground: res.color,\r\n\t\tborder: '1px solid #606060',\r\n\t\tmargin: '2px',\r\n\t\tboxShadow: '0 0 0 2px #fff inset',\r\n\t\tborderRadius: '2px',\r\n\t      }}\r\n\t    />\r\n\t  </div>\r\n\t)\r\n      }) \r\n    )\r\n  }\r\n\r\n  render() {    \r\n    return (\r\n      <div id = \"sideContainer\">\r\n\t<div className = \"boxLabel\">Pass</div>\r\n\t<div className = \"pickerBox\">\r\n\t  { this.renderShifts() }\r\n\t</div>\r\n\t\r\n\t<div className = \"boxLabel\">Resurser</div>\r\n\t<div\r\n\t  className = 'pickerBox'\r\n\t  style = {{\r\n\t    width: 'auto',\r\n\t  }}\r\n\t>\r\n\t  { this.renderResources() }\r\n\t</div>\r\n\t<img\r\n\t  onClick = { () => this.props.setOptionsModal(true) }\r\n\t  src = { optionsIcon }\r\n\t  alt = '[Options]'\r\n\t  id = 'cogButton'\r\n\t  style = {{\r\n\t    position: 'absolute',\r\n\t    bottom: '10px',\r\n\t    right: '10px',\r\n\t    width: '30px',\r\n\t    cursor: 'pointer',\r\n\t  }}\r\n\t/>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction ShiftInfoBlock(props) {\r\n\r\n  let stop = new Date()\r\n  stop.setHours(props.shift.startHour, props.shift.startMinute, 0)\r\n  stop = moment(stop).add(props.shift.minuteLength, 'm').toDate()\r\n  const fromTo = timePad(props.shift.startHour) + ':' + \r\n\t\t timePad(props.shift.startMinute) + ' - ' +\r\n\t\t timePad(stop.getHours()) + ':' +\r\n\t\t timePad(stop.getMinutes())\r\n  \r\n  return (\r\n    <div className = { props.className }>\r\n      { fromTo }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PickerPanel\r\n","import React, { Component } from 'react'\r\nimport moment from 'moment'\r\n\r\nimport ColorPicker from 'rc-color-picker'\r\nimport 'rc-color-picker/assets/index.css'\r\n\r\nimport InputMoment from 'input-moment'\r\nimport 'input-moment/dist/input-moment.css'\r\n\r\nimport { timePad } from './utilities'\r\n\r\nimport './editeventmodal.css'\r\n\r\n\r\nclass EditEventModal extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const color = this.props.event.color === undefined ?\r\n\t\t  this.randomColor() : this.props.event.color\r\n\r\n    let title, titleValue\r\n    if (this.props.event.title === undefined &&\r\n\tthis.props.event.customTitle === undefined) {\r\n      title = 'Titel'\r\n      titleValue = ''\r\n    }\r\n    \r\n\r\n    else {\r\n      title = this.props.event.title !== undefined ?\r\n\t      this.props.event.title : this.props.event.customTitle\r\n      titleValue = title\r\n    }\r\n\r\n    this.state = {\r\n      eventColor: color,\r\n      start: this.props.event.start,\r\n      end: this.props.event.end,\r\n      customTitle: titleValue,\r\n      previousTitle: title,\r\n      startChoosing: false,\r\n      endChoosing: false,\r\n    }\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n    this.titleInput.focus()\r\n  }\r\n\r\n  randomColor = () => { return \"#\"+((1<<24)*Math\r\n    .random()|0).toString(16) }\r\n\r\n  generalErrorPanel = type => {\r\n    if (this.state[type] === undefined)\r\n      return ''\r\n\r\n    else return (\r\n      <div\r\n\tstyle = {{\r\n\t  textAlign: 'center',\r\n\t  margin: '0px 0px 6px',\r\n\t  background: '#ffa5a5',\r\n\t  padding: '4px 0 4px 0',\r\n\t}}\r\n      >\r\n\t{ this.state[type] }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // target = \"start\" | \"end\"\r\n  dateTimePicker = ({ trigger, target }) => {\r\n\r\n    let dt = this.state[target]\r\n\r\n    if (!trigger)\r\n      return (\r\n\t  <div\r\n\t    className = 'clickable'\r\n\t    style = {{\r\n\t      display: 'inline-table',\r\n\t      padding: '0px 4px 0px 4px',\r\n\t    }}\r\n\t    onClick = { () => {\r\n\t\tthis.setState({\r\n\t\t  [`${target}Choosing`]: true,\r\n\t\t})\r\n\t    }}\r\n\t  >\r\n\t    {\r\n\t      dt.getFullYear() + '-' +\r\n\t      timePad(dt.getMonth()+1) +  '-' +\r\n\t      timePad(dt.getDate()) + ' ' +\r\n\t      timePad(dt.getHours()) + ':' +\r\n\t      timePad(dt.getMinutes())\r\n\t    }\r\n\t  </div>\r\n      )\r\n\r\n    else return (\r\n      <InputMoment\r\n\tmindate = { new Date() }\r\n\tmoment = { moment(this.state[target]) }\r\n\tonSave = { () => {\r\n\t    this.setState({\r\n\t      [`${target}Choosing`]: false,\r\n\t      dateError: undefined,\r\n\t    })\t    \r\n\t}}\r\n\tonChange = { newMoment => {\r\n\t    if (target === 'start' && newMoment.isAfter(this.state.end)) {\r\n\t      this.setState({\r\n\t\tdateError: 'Händelsen måste börja innan den slutar',\r\n\t      })\r\n\t      return\r\n\t    }\r\n\r\n\t    if (target === 'end' && newMoment.isBefore(this.state.start) ) {\r\n\t      this.setState({\r\n\t\tdateError: 'Händelsen får inte sluta innan den börjar',\r\n\t      })\r\n\t      return\r\n\t    }\r\n\r\n\t    this.setState({\r\n\t      [target]: newMoment.toDate(),\r\n\t      dateError: undefined,\r\n\t    })  \r\n\t}}\r\n\tminStep = { 5 }\r\n\thourStep = { 1 }\r\n\tprevMonthIcon = \"ion-ios-arrow-left\"\r\n\tnextMonthIcon = \"ion-ios-arrow-right\"\r\n      />\r\n    )\r\n  }\r\n\r\n  optionsTable = () => {\r\n\r\n    if (this.state.startChoosing || this.state.endChoosing) {\r\n      const target = this.state.startChoosing ? 'start' : 'end'\r\n  \r\n      return (\r\n\t<React.Fragment>\r\n\t  <div\r\n\t    style = {{\r\n\t      width: '100%',\r\n\t      textAlign: 'center',\r\n\t  }}>\r\n\t    <b>{ target === 'start' ? 'Börjar' : 'Slutar' }</b>\r\n\t  </div>\r\n\t  \r\n\t  { this.generalErrorPanel('dateError') }\r\n\t  \r\n\t  {\r\n\t    this.dateTimePicker({\r\n\t      trigger: true,\r\n\t      target: target,\r\n\t    })\r\n\t  }\r\n\t</React.Fragment>\r\n      )\r\n    }\r\n    \r\n    return (\r\n      <table>\r\n\t<tbody>\r\n\t  \r\n\t  <tr>\r\n\t    <td\r\n\t      style = {{\r\n\t\twidth: '50px',\r\n\t      }}\r\n\t    >\r\n\t      Färg\r\n\t    </td>\r\n\t    <td>\r\n\t      <ColorPicker\r\n\t      enableAlpha = { false }\r\n\t      animation = 'slide-up'\r\n\t      color = { this.state.eventColor }\r\n\t      onClose = { choice => {\r\n\t\t  this.setState({\r\n\t\t    eventColor: choice.color\r\n\t\t  })\r\n\t      }}\r\n\t      />\r\n\t    </td>\r\n\t  </tr>\r\n\r\n\t  <tr>\r\n\t    <td>Börjar</td>\r\n\t    <td>\r\n\t      {\r\n\t\tthis.dateTimePicker({\r\n\t\t  trigger: this.state.startChoosing,\r\n\t\t  target: 'start'\r\n\t\t})\r\n\t      }\r\n\t    </td>\r\n\t  </tr>\r\n\r\n\t  <tr>\r\n\t    <td>Slutar</td>\r\n\t    <td>\r\n\t      {\r\n\t\tthis.dateTimePicker({\r\n\t\t  trigger: this.state.endChoosing,\r\n\t\t  target: 'end'\r\n\t\t})\r\n\t      }\r\n\t    </td>\r\n\t  </tr>\r\n\t</tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n  buttonsPanel = () => {\r\n    return (\r\n      <div\r\n\tstyle = {{\r\n\t  display: \"flex\",\r\n\t  justifyContent: \"space-between\",\r\n\t  marginBottom: '-3px',\r\n\t}}>\r\n\t<input\r\n\ttype = \"submit\"\r\n\tvalue = \"Spara\"\r\n\tstyle = {{\r\n\t  borderRadius: '0px 0px 0px 5px',\r\n\t}}\r\n\t/>\r\n\t<button\r\n\t  onClick = { this.props.closeModal }\r\n\t  style = {{\r\n\t    borderRadius: '0px 0px 5px 0px',\r\n\t  }}\r\n\t>\r\n\t  Avbryt\r\n\t</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    if (this.state.startChoosing || this.state.endChoosing)\r\n      return (\r\n\t<React.Fragment>\r\n\t{ this.generalErrorPanel('dateError') }\r\n\t{\r\n\t  this.dateTimePicker({\r\n\t    trigger: true,\r\n\t    target: this.state.startChoosing ? 'start' : 'end',\r\n\t  })\r\n\t}\r\n\t</React.Fragment>\r\n      )\r\n    \r\n    return (\r\n      <form\r\n      onSubmit = { ev => {\r\n\t    ev.preventDefault()\r\n\t    if (!this.state.customTitle || this.state.customTitle.length === 0) {\r\n\r\n\t      this.setState({\r\n\t\ttitleError: 'Titeln får inte vara tom',\r\n\t      })\r\n\t      return\r\n\t    }\r\n\r\n\t    if (this.props.event.id !== undefined) {\r\n\t      this.props.editEvent({\r\n\t\tid: this.props.event.id,\r\n\t\tcustomTitle: this.state.customTitle,\r\n\t\tstart: this.state.start,\r\n\t\tend: this.state.end,\r\n\t\tcolor: this.state.eventColor,\r\n\t\tresourceId: undefined,\r\n\t\tshiftId: undefined,\r\n\t      })\r\n\t      this.props.closeModal()\r\n\t    }\r\n\t    else { \r\n\t      this.props.addEvent({\r\n\t\tcustomTitle: this.state.customTitle,\r\n\t\tstart: this.state.start,\r\n\t\tend: this.state.end,\r\n\t\tcolor: this.state.eventColor,\r\n\t      })\r\n\t      this.props.closeModal()\r\n\t    }\r\n\t}}\r\n\t>\r\n\t\r\n\t<div style = {{\r\n\t  textAlign: \"center\",\r\n\t  fontWeight: \"bold\",\r\n\t  margin: '-8px 0px 6px 0px',\r\n\t}}\r\n\t>\r\n\t  { this.props.event.id === undefined ? 'Ny händelse' : 'Redigera händelse' }\r\n\t</div>\r\n\r\n\t<input\r\n\t  ref = { instance => this.titleInput = instance }\r\n\t  type = \"text\"\r\n\t  placeholder = { this.state.previousTitle }\r\n\t  value = { this.state.customTitle}\r\n\t  onChange = { event => {\r\n\t      let newError = undefined\r\n\t      if (event.target.value.length === 0)\r\n\t\tnewError = this.state.titleError\r\n\r\n\t      this.setState({\r\n\t\tcustomTitle: event.target.value,\r\n\t\ttitleError: newError,\r\n\t      })\r\n\t  }}\r\n\t  style = {{ padding: '4px' }}\r\n\t>\r\n\t</input>\r\n\r\n\t{ this.generalErrorPanel('titleError') }\r\n\t{ this.optionsTable() }\r\n\t{ this.buttonsPanel() }\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EditEventModal\r\n","import React, { Component } from 'react'\r\nimport Joyride from 'react-joyride'\r\n\r\nimport addBubble from './img/plus.png'\r\nimport ruleTag from './img/ruletag.png'\r\n\r\nclass PackageTour extends Component {\r\n  steps = [\r\n    {\r\n      target: 'body',\r\n      title: 'Introduktion',\r\n      content: 'En kort genomgång av alla funktionaliteter.',\r\n      placement: 'center',\r\n    },\r\n\r\n    {\r\n      target: '#sideContainer',\r\n      content: 'För tillfället kommer inget att hända om du klickar'\r\n\t     + ' på rutorna i kalendern eftersom inga pass eller resurser är tillagda.',\r\n      placement: 'left',\r\n    },\r\n    \r\n    {\r\n      target: '#cogButton',\r\n      content: 'Pass och resurser läggs till i huvudmenyn. Klicka här för att öppna den.',\r\n      placement: 'top-start',\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n    },\r\n    \r\n    {\r\n      target: 'div.modalPanel:nth-child(2)',\r\n      content: (\r\n\t<div>\r\n\t  Klicka på\r\n\t  <img\r\n\t    src = { addBubble }\r\n\t    alt = 'Plus sign'\r\n\t    style = {{\r\n\t      width: '20px',\r\n\t      display: 'inline',\r\n\t      margin: '0px 5px -4px 5px',\r\n\t    }}\r\n\t  />\r\n\t  för att lägga till en resurs. Resursen kommer att skapas med förifyllda\r\n\t  värden som kan ändras genom att klicka på dem. Ändra ett värde för att\r\n\t  fortsätta.\r\n\t</div>\r\n      ),\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n      hideCloseButton: true,\r\n    },\r\n    \r\n    {\r\n      target: 'div.modalPanel:nth-child(3)',\r\n      content: (\r\n\t<div>\r\n\t  Klicka på\r\n\t  <img\r\n\t    src = { addBubble }\r\n\t    alt = 'Plus sign'\r\n\t    style = {{\r\n\t      width: '20px',\r\n\t      display: 'inline',\r\n\t      margin: '0px 5px -4px 5px',\r\n\t    }}\r\n\t  />\r\n\t  för att lägga till en resurs. Ändra ett värde för att fortsätta.\r\n\t</div>\r\n      ),\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n      hideCloseButton: true,\r\n    },\r\n    \r\n    {\r\n      target: 'div.modalPanel:nth-child(4)',\r\n      content: 'Spara respektive öppna till och från en fil på hårddisken.',\r\n    },\r\n    \r\n    {\r\n      target: 'div.modalPanel:nth-child(5)',\r\n      content: (\r\n\t<div>\r\n\t  <img\r\n\t    src = { ruleTag }\r\n\t    alt = 'Rule demonstration'\r\n\t    style = {{\r\n\t      float: 'left',\r\n\t      marginRight: '10px',\r\n\t    }}\r\n\t/>\r\n\t<p style = {{ textAlign: 'left' }}>\r\n\t  Varje dag i kalendern har en siffran i övre vänstra hörnet\r\n\t  som visar antalet schemalagda timmar den dagen. Om siffran\r\n\t  uppfyller regeln så kommer den att få den angivna färgen.\r\n\t  Lägg till en regel genom att klicka på\r\n\t  <img\r\n\t    src = { addBubble }\r\n\t    alt = 'Plus sign'\r\n\t    style = {{\r\n\t      width: '20px',\r\n\t      display: 'inline',\r\n\t      margin: '0px 5px -4px 5px',\r\n\t    }}\r\n\t  />\r\n\t  och gör en förändring för att fortsätta.\r\n\t</p>\r\n\t</div>\r\n      ),\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n      hideCloseButton: true,\r\n    },\r\n\r\n    {\r\n      target: '#closeBubble',\r\n      content: 'Stäng menyn genom att klicka här.',\r\n      placement: 'top-start',\r\n      hideCloseButton: true,\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n    },\r\n\r\n    {\r\n      target: '#sideContainer',\r\n      content: 'Passet och resursen som lades till tidigare finns nu'\r\n\t     + ' i listan. Den grå bakgrunden betyder att passet eller resursen'\r\n\t     + ' är markerat och kommer att användas då en händelse läggs till.',\r\n      placement: 'left',\r\n      hideBackButton: true,\r\n    },\r\n\r\n    {\r\n      target: 'div.rbc-month-row:nth-child(4) > div:nth-child(1) > div:nth-child(4)',\r\n      content:\r\n      (\t\r\n       <p style = {{ textAlign: 'left' }} >\r\n\t Klicka på en kalenderruta för att lägga till en händelse. Du\r\n\t kan också klicka och dra för att lägga till flera samtidigt.\r\n\t Klicka och dra för att flytta en händelse<br />\r\n\t <b>Högerklick</b> - tar bort händelsen<br />\r\n\t <b>Dubbelklick</b> - redigerar händelsen\r\n       </p>\r\n      ),\r\n      \r\n      placement: 'left',\r\n      spotlightClicks: true,\r\n      disableOverlay: true,\r\n    },\r\n    \r\n    {\r\n      target: 'span.rbc-btn-group:nth-child(3) > button:nth-child(1)',\r\n      content: 'Schemaläggaren är nu i månadsvyn. I den här vyn kan bara normala'\r\n\t     + ' händelser läggas till och de kommer att döpas efter resursens och passets'\r\n\t     + ' namn. Hur länge händelsen varar och när den börjar bestäms av det'\r\n\t     + ' markerade passet. Om passet eller resursen ändras - färg eller namn t.ex.'\r\n\t     + ' - så kommer alla schemalagda händelser också att förändras.',\r\n      placement: 'bottom',\r\n    },\r\n    \r\n    {\r\n      target: 'span.rbc-btn-group:nth-child(3) > button:nth-child(2)',\r\n      content: 'Klicka här för att ändra till veckovyn.',\r\n      placement: 'bottom',\r\n      hideCloseButton: true,\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n    },\r\n\r\n    {\r\n      target: 'body',\r\n      placement: 'center',\r\n      content: 'Notera hur sidopanelen inte syns längre. I veckovyn så används'\r\n\t     + ' inte pass eller resurser utan fristående händelser skapas i stället.'\r\n\t     + ' De är inte kopplade till något och kommer inte att ändras om något'\r\n\t     + ' av passen eller resurserna förändras.',\r\n      disableOverlay: true,\r\n      disableBackButton: true,\r\n    },\r\n\r\n    {\r\n      target: 'div.rbc-day-slot:nth-child(4) > div:nth-child(13)',\r\n      content: 'Klicka och dra för att lägga till en händelse.',\r\n      hideCloseButton: true,\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n    },\r\n\r\n    {\r\n      target: '.ReactModal__Content',\r\n      content: 'Den här menyn fungerar precis som den tidigare meny så klicka'\r\n\t     + ' på det du vill ändra. Schemaläggaren kommer att säga till om du'\r\n\t     + ' försöker göra något galet så inget kan gå fel.',\r\n      placement: 'left',\r\n      offset: 100,\r\n      hideCloseButton: true,\r\n      hideFooter: true,\r\n      spotlightClicks: true,\r\n      disableOverlay: true,\r\n    },\r\n\r\n    {\r\n      target: 'body',\r\n      content: 'Du är nu klar med genomgången. Lycka till! 🎂',\r\n      placement: 'center',\r\n      hideBackButton: true,\r\n    }\r\n\r\n  ]\r\n\r\n  handleCallback = arg => {\r\n    if (arg.type === 'tour:end') {\r\n      this.props.done()\r\n      return\r\n    }\r\n      \r\n    if (arg.type === 'step:after')\r\n      this.props.setStep(arg.index+1)\r\n\r\n    if (arg.action === 'skip')\r\n      this.props.done()\r\n\r\n    if (arg.action === 'prev'\r\n\t&& arg.type === 'step:after') {\r\n      console.log('prev arg: ', arg)\r\n      this.props.setStep(arg.index-1)\r\n    }\r\n    \r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Joyride\r\n\tdisableOverlayClose = { true }\r\n\tshowSkipButton = { true }\r\n\tsteps = { this.steps }\r\n\tstepIndex = { this.props.stepIndex }\r\n\tlocale = {{\r\n\t  next: 'Nästa',\r\n\t  skip: 'Hoppa över',\r\n\t  last: 'Klar',\r\n\t  back: 'Tillbaka',\r\n\t}}\r\n\tcallback = { this.handleCallback }\r\n\tdisableBeacon = { true }\r\n\tcontinuous = { true }\r\n\trun = { this.props.run }\r\n      />\r\n    )\r\n  }\r\n}\r\n\r\nexport default PackageTour\r\n","import React, { Component } from 'react'\r\nimport update from 'immutability-helper'\r\nimport Modal from 'react-modal'\r\n\r\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\r\nimport moment from 'moment'\r\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css'\r\n\r\nimport { loadResources, loadEvents, loadShifts,\r\n\t loadMetaData, storeData } from './storage'\r\n\r\nimport { moveEvent, addEvent, removeEvent,\r\n\t eventRender, getEventProp, addEvents } from './events'\r\n\r\nimport { create, archive, sortComparer, timeOverlap } from './utilities'\r\n\r\nimport './App.css'\r\n//import { storeTestData } from './testdata'\r\nimport ModalMenu from './modalmenu'\r\nimport PickerPanel from './pickerpanel'\r\nimport EditEventModal from './editeventmodal'\r\nimport PackageTour from './packagetour'\r\n\r\n// changing locale doesn't work without this\r\nimport 'moment/locale/sv'\r\n\r\nmoment.locale('sv')\r\nconst localizer = momentLocalizer(moment)\r\n\r\n// this one has to be capitalized(?)\r\nconst DragCalendar = withDragAndDrop(Calendar)\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    \r\n    // read data from localStorage\r\n    const events = loadEvents()\r\n    const resources = loadResources()\r\n    const shifts = loadShifts()\r\n    const metaData = loadMetaData()\r\n    \r\n    this.state = {\r\n      events: events,\r\n      resources: resources.sort(sortComparer('resources')),\r\n      shifts: shifts.sort(sortComparer('shifts')),\r\n      selected: {\r\n\tshift: shifts[0],\r\n\tresource: resources[0],\r\n      },\r\n      optionsModalOpen: false,\r\n      editEventModalOpen: false,\r\n      metaData: metaData,\r\n      view: 'month',\r\n      viewDate: new Date(),\r\n    }\r\n  }\r\n\r\n  advanceTutorial = () => {\r\n    this.setState((state, _) => {\r\n      state.metaData.tutorial.stepIndex++;\r\n      return {\r\n\tmetaData: state.metaData\r\n      }\r\n    })\r\n  }\r\n  \r\n  setSelected = ({ shift, resource }) => {\r\n    this.setState({\r\n      selected: {\r\n\tshift: shift,\r\n\tresource: resource,\r\n      }\r\n    })    \r\n  }\r\n\r\n  updateElement = (newElement, type) => {\r\n\r\n    let index = this.state[type]\r\n\t\t    .findIndex(elem => elem.id === newElement.id)\r\n    if (type === 'resources' && index === -1)\r\n      index = this.state.metaData.archive\r\n\t\t  .findIndex(res => res.id === newElement.id)\r\n\r\n    const newList = update(this.state[type],\r\n\t\t\t   {$splice: [[index, true, newElement]]})\r\n    let newEventList = this.state.events\r\n\r\n    // if a shift is updated then all the events associated with it\r\n    // has to have their start and end dates updated\r\n    if (type === 'shifts') {\r\n      newEventList = this.state.events.map(event => {\r\n\tif (event.shiftId === newElement.id) {\r\n\t  event.start.setHours(newElement.startHour,\r\n\t\t\t       newElement.startMinute, 0)\r\n\t  event.end = moment(event.start)\r\n\t    .add(newElement.minuteLength, 'm')\r\n\t    .toDate()\r\n\t}\r\n\t\r\n\treturn event\r\n      })\r\n      \r\n      storeData(newEventList, 'events')\r\n    }\r\n\r\n    this.setState({\r\n      [type]: newList.sort(sortComparer(type)),\r\n      events: newEventList,\r\n    })\r\n    storeData(newList, type)\r\n  }\r\n\r\n\r\n  // TODO: add a context menu instead of removing the event straight away\r\n  render() {\r\n    // don't render the pickerPanel when in week mode so the app\r\n    // is slightly more usable on mobile devices since the panel\r\n    // isn't used in that mode anyway\r\n    \r\n    let pickerPanel = ''\r\n\r\n    if (this.state.view === 'month') {\r\n      pickerPanel = (\r\n\t<PickerPanel\r\n\t  resources = { this.state.resources }\r\n\t  shifts = { this.state.shifts }\r\n\t  selected = { this.state.selected }\r\n\t  setSelected = { this.setSelected }\r\n\t  optionsModalOpen = { this.state.optionsModalOpen }\r\n\t  setOptionsModal = { (value) => this.setState({\r\n\t      optionsModalOpen: value\r\n\t  }) }\r\n\t/>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div id = \"container\">\r\n\t<PackageTour\r\n\t  parentState = { this.state }\r\n\t  stepIndex = { this.state.metaData.tutorial.stepIndex }\r\n\t  setStep = { newStep => {\r\n\t      this.setState({\r\n\t\tmetaData: update(this.state.metaData, {\r\n\t\t  tutorial: {\r\n\t\t    stepIndex: {$set: newStep}\r\n\t\t  }}),\r\n\t      })\r\n\t  }}\r\n\t  run = { !this.state.metaData.tutorial.done }\r\n\t  done = { () => {\r\n\t      this.setState((state, _) => {\r\n\t\tstate.metaData.tutorial = {\r\n\t\t  done: true,\r\n\t\t  stepIndex: 0,\r\n\t\t}\r\n\t\t\r\n\t\tstoreData(state.metaData, 'metaData')\r\n\t\treturn {\r\n\t\t  metaData: state.metaData,\r\n\t\t}\r\n\t      })\r\n\t  }}\r\n\t/>\r\n\t\r\n\t<Modal\r\n\t  isOpen = { this.state.optionsModalOpen }\r\n\t  shouldCloseOnOverlayClick = { false }\r\n\t  className = \"modalCommon optionsMenuModal\"\r\n\t  overlayClassName = \"modalOverlayCommon\"\r\n\t  onAfterOpen = { () => {\r\n\t      document.getElementById('root')\r\n\t\t      .style.filter = 'blur(2px)'\r\n\r\n\t      if (this.state.metaData.tutorial.done) return\r\n\t      this.setState((state, props) => {\r\n\r\n\t\t// TODO: some better check in case we go back into the menu\r\n\t\tif (!state.metaData.tutorial.done) {\r\n\t\t  state.metaData.tutorial.stepIndex++;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t  metaData: state.metaData,\r\n\t\t}\r\n\t      })\r\n\t  }}\r\n\t  \r\n\t  onRequestClose = { () => {\r\n\t      document.getElementById('root').style.filter = ''\r\n\t      this.setState((state, props) => {\r\n\t\tstate.optionsModalOpen = false\r\n\r\n\t\treturn state\r\n\t      })\r\n\t  }}\r\n\t  \r\n\t  ariaHideApp = { false }\r\n\t>\r\n\t  <ModalMenu\r\n\t    resources = { this.state.resources }\r\n\t    shifts = { this.state.shifts }\r\n\t    updateElement = { (elem, type) => {\r\n\t\tthis.advanceTutorial()\r\n\t\tthis.updateElement(elem, type)\r\n\t    }}\r\n\t    closeModal = { () => {\r\n\t\t// remove blur\r\n\t\tdocument.getElementById('root').style.filter = ''\r\n\t\tthis.setState((state, props) => {\r\n\r\n\t\t  if (!state.metaData.tutorial.done) {\r\n\t\t    state.metaData.tutorial.stepIndex++;\r\n\t\t  }\r\n\r\n\t\t  return {\r\n\t\t    optionsModalOpen: false,\r\n\t\t    metaData: state.metaData,\r\n\t\t  }\r\n\t\t})\r\n\t    }}\r\n\t    archive = { (element, type) => {\r\n\t\t// select another element when the currently selected\r\n\t\t// one gets removed\r\n\t\t\r\n\t\tconst newData = archive(element, type, this.state)\r\n\t\tconst replacement = this.state[type]\r\n\t\t\t\t\t.find(ele => ele.id !== element.id )\r\n\r\n\t\t// slice to go from 'resourceS' -> 'resource'\r\n\t\tthis.setState({\r\n\t\t  selected: update(this.state.selected,\r\n\t\t\t\t   {[type.slice(0,-1)]: {$set: replacement}}),\r\n\t\t  [type]: newData[type],\r\n\t\t  metaData: newData.metaData,\r\n\t\t})\r\n\r\n\t\tstoreData(newData[type], type)\r\n\t\tstoreData(newData.metaData, 'metaData')\r\n\t    }}\r\n\t  \r\n\t    create = { (element, type) => {\r\n\t\tlet created = create(element, type, this.state)\r\n\r\n\t\t// if it's the first resource or shift created then\r\n\t\t// make it selected\r\n\t\tif (!this.state.selected[type.slice(0,-1)]) {\r\n\t\t  this.setState({\r\n\t\t    selected: update(this.state.selected,\r\n\t\t\t\t     {[type.slice(0,-1)]: {$set: created.newElement }}),\r\n\t\t  })\r\n\t\t}\r\n\r\n\t\tthis.setState({ [type]: created.newElementList })\r\n\t\tstoreData(created.newElementList, type)\r\n\t    }}\r\n\r\n\t    insert = { newData => {\r\n\t\t// used in modalmenu to insert the new state from a\r\n\t\t// loaded file\r\n\t\t// TODO: display the created date somewhere\r\n\t\t// TODO: check version\r\n\r\n\t\tnewData.shifts.sort(sortComparer('shifts'))\r\n\t\tnewData.resources.sort(sortComparer('resources'))\r\n\r\n\t\tthis.setState({\r\n\t\t  events: newData.events,\r\n\t\t  shifts: newData.shifts,\r\n\t\t  resources: newData.resources,\r\n\t\t  metaData: newData.metaData,\r\n\t\t  selected: {\r\n\t\t    resource: newData.resources[0],\r\n\t\t    shift: newData.shifts[0]\r\n\t\t  }\r\n\t\t})\r\n\t    }}\r\n\r\n\t    setRules = { newRules => {\r\n\t\tlet newMetaData = update(this.state.metaData,\r\n\t\t\t\t\t {rules: {$set: newRules }})\r\n\t\t\r\n\t\tstoreData(newMetaData, 'metaData')\r\n\t\tthis.setState({\r\n\t\t  metaData: newMetaData,\r\n\t\t})\r\n\t    }}\r\n\t    rules = { this.state.metaData.rules }\r\n\t    advanceTutorial = { this.advanceTutorial }\r\n\t  />\r\n\t</Modal>\r\n\r\n\t<Modal\r\n\t  isOpen = { this.state.editEventModalOpen }\r\n\t  shouldCloseOnOverlayClick = { false }\r\n\t  className = \"modalCommon editEventModal\"\r\n\t  overlayClassName = \"modalOverlayCommon\"\r\n\t  onAfterOpen = { () => document.getElementById('root')\r\n\t\t\t\t\t.style.filter = 'blur(2px)' }\r\n\t  onRequestClose = { () => {\r\n\t      document.getElementById('root').style.filter = ''\r\n\t      this.setState((state, props) => {\r\n\r\n\t\t// advance the tutorial one step and switch to the month view\r\n\t\tif (!state.metaData.tutorial.done) {\r\n\t\t  state.metaData.tutorial.stepIndex++;\r\n\t\t  state.view = 'month'\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t  editEventModalOpen: false,\r\n\t\t  metaData: state.metaData,\r\n\t\t}\r\n\t      })\r\n\t  }}\r\n\t  ariaHideApp = { false }\r\n\t>\r\n\t  <EditEventModal\r\n\t    addEvent = { newEvent => {\r\n\t\tconst newEventList = addEvent(newEvent, this.state.events)\r\n\r\n\t\tthis.setState({ events: newEventList })\r\n\t\tstoreData(newEventList, 'events')\r\n\t    }}\r\n\t    event = { this.state.eventBasis }\r\n\t    editEvent = { replacement => {\r\n\t\tconst index = this.state.events\r\n\t\t\t\t  .findIndex(ev => ev.id === replacement.id )\r\n\r\n\t\tconst newList = update(this.state.events,\r\n\t\t\t\t       {$splice: [[index, true, replacement]]})\r\n\r\n\t\tthis.setState({ events: newList })\r\n\t\tstoreData(newList, 'events')\r\n\t    }}\r\n\t    closeModal = { () => {\r\n\t\t// remove blur\r\n\t\tdocument.getElementById('root').style.filter = ''\r\n\t\tthis.setState((state, _) => {\r\n\t\t  state.editEventModalOpen = false\r\n\r\n\t\t  if (!state.metaData.tutorial.done) {\r\n\t\t    state.metaData.tutorial.stepIndex++;\r\n\t\t    state.view = 'month'\r\n\t\t  }\r\n\r\n\t\t  return {\r\n\t\t    editEventModalOpen: state.editEventModalOpen,\r\n\t\t    metaData: state.metaData,\r\n\t\t    view: state.view,\r\n\t\t  }\r\n\t\t  \r\n\t\t})\r\n\t    }}\r\n\t  />\r\n\t</Modal>\r\n\r\n\t<div id = \"calendar\">\r\n\t  <DragCalendar\r\n\t    resizableAccessor={ () => false }\r\n\t    startAccessor = \"start\"\r\n\t    endAccessor = \"end\"\r\n\t    onDrillDown = { date => {\r\n\t\tthis.setState({\r\n\t\t  viewDate: date,\r\n\t\t  view: 'week',\r\n\t\t})\r\n\t    }}\r\n            localizer = { localizer }\r\n            events = { this.state.events }\r\n\t    onEventDrop = { (eventObj) => {\r\n\t\tconst newEventList = moveEvent(eventObj, this.state.events)\r\n\t\tthis.setState({ events: newEventList })\r\n\t\tstoreData(newEventList, 'events')\r\n\t    }}\r\n\t    onDragStart = { console.log }\r\n            onSelectSlot = { selection => {\r\n\t\tif (this.state.view === 'month'\r\n\t\t    && (this.state.selected.resource === undefined\r\n\t\t     || this.state.selected.shift === undefined)) {\r\n\t\t  return\r\n\t\t}\r\n\t\tif (this.state.view === 'month' ) {\r\n\t\t  const newEventList = addEvents(selection,\r\n\t\t\t\t\t\t this.state.events,\r\n\t\t\t\t\t\t this.state.selected)\r\n\t\t  this.setState({ events: newEventList })\r\n\t\t  storeData(newEventList, 'events')\r\n\t\t}\r\n\t\t\r\n\t\tif (this.state.view === 'week' ) {\r\n\t\t  console.log('weekstuff')\r\n\t\t  this.setState((state, props) => {\r\n\r\n\t\t    if (!state.metaData.tutorial.done)\r\n\t\t      state.metaData.tutorial.stepIndex++;\r\n\r\n\t\t    return {\r\n\t\t      metaData: state.metaData,\r\n\t\t      editEventModalOpen: true,\r\n\t\t      eventBasis: {\r\n\t\t\tstart: selection.start,\r\n\t\t\tend: selection.end,\r\n\t\t      }\r\n\t\t    }\r\n\t\t  })\r\n\t\t}\r\n\r\n\t    }}\r\n\t  \r\n\t    onDoubleClickEvent = { (event, e) => {\r\n\r\n\t\tlet resolvedColor, resolvedTitle\r\n\r\n\t\t// custome events don't have resources associated with them\r\n\t\tif (event.customTitle !== undefined ) {\r\n\t\t  resolvedColor = event.color\r\n\t\t  resolvedTitle = event.title\r\n\t\t}\r\n\t\telse {\r\n\t\t  const resource = this.state.resources\r\n\t\t\t\t       .find(res => res.id === event.resourceId)\r\n\t\t\t\t|| this.state.metaData.archive.resources\r\n\t\t\t\t       .find(res => res.id === event.resourceId )\r\n\t\t  const shift = this.state.shifts.find(sh => sh.id === event.shiftId)\r\n\t\t\t     || this.state.metaData.archive.shifts\r\n\t\t\t\t    .find(sh => sh.id === event.shiftId )\r\n\r\n\t\t  resolvedColor = resource.color\r\n\t\t  resolvedTitle = resource.title + ', ' + shift.title + '*'\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({\r\n\t\t  eventBasis: {\r\n\t\t    ...event,\r\n\t\t    color: resolvedColor,\r\n\t\t    title: resolvedTitle,\r\n\t\t  },\r\n\t\t  editEventModalOpen: true,\r\n\t\t})\r\n\t    }}\r\n            defaultView = { 'month' }\r\n\t    view = { this.state.view }\r\n            defaultDate = { this.state.viewDate }\r\n\t    date = { this.state.viewDate }\r\n\t    eventPropGetter = { (event, start, end, isSelected) => {\r\n\t\treturn getEventProp(event, start,\r\n\t\t\t\t    end, isSelected,\r\n\t\t\t\t    this.state)\r\n\t    }}\r\n\t    selectable = { 'ignoreEvents' }\r\n\t    views = { ['month', 'week'] }\r\n\t    onView = { view => {\r\n\t\tthis.setState((state, props) => {\r\n\t\t  state.view = view\r\n\r\n\t\t  if (!this.state.metaData.tutorial.done)\r\n\t\t    state.metaData.tutorial.stepIndex++;\r\n\r\n\t\t  // coming back to the month view a second time is only\r\n\t\t  // done at the end of the tutorial\r\n\t\t  if (view === 'month'\r\n\t\t      && !this.state.metaData.tutorial.done\r\n\t\t      && this.state.metaData.tutorial.stepIndex > 1) {\r\n\t\t    \r\n\t\t    state.metaData.tutorial = {\r\n\t\t      stepIndex: 0,\r\n\t\t      done: true,\r\n\t\t    }\r\n\t\t    \r\n\t\t    storeData(state.metaData, 'metaData')\r\n\t\t  }\r\n\r\n\t\t  return {\r\n\t\t    view: view,\r\n\t\t    metaData: state.metaData\r\n\t\t  }\r\n\t\t})\r\n\t    }}\r\n\t    onNavigate = { newDate => { this.setState({ viewDate: newDate }) }}\r\n\t    step = { 60 }\r\n\t    popup\r\n\t    components = {{\r\n\t      eventWrapper: ({event, children}) => (\r\n\t\t<div\r\n\t\t  onContextMenu = { e => {\r\n\t\t      const newEventList = removeEvent(event, this.state.events)\r\n\t\t      this.setState({ events: newEventList })\r\n\t\t      storeData(newEventList, 'events')\r\n\t\t      e.preventDefault()\r\n\t\t  }}>\r\n\t\t  { children }\r\n\t\t</div>\r\n\t      ),\r\n\t      event: args => { return eventRender(args, this.state) },\r\n\t      dateCellWrapper: cellProps => {\r\n\t\t\r\n\t\tconst style = {\r\n\t\t  display: 'flex',\r\n\t\t  position: 'relative',\r\n\t\t  flex: 1,\r\n\t\t  borderLeft: '1px solid #DDD',\r\n\t\t}\r\n\r\n\t\tlet calendarDay = {\r\n\t\t  start: cellProps.value,\r\n\t\t  end: moment(cellProps.value).endOf('day')\r\n\t\t}\r\n\t\t\r\n\t\tlet scheduledHours = 0\r\n\t\t\r\n\t\tthis.state.events.forEach(elem => {\r\n\t\t  scheduledHours += timeOverlap(calendarDay, {\r\n\t\t    start: moment(elem.start),\r\n\t\t    end: moment(elem.end),\r\n\t\t  })\r\n\t\t})\r\n\r\n\t\t// ms -> hours\r\n\t\tscheduledHours = scheduledHours / (60*60*1000)\r\n\r\n\t\tlet tag = '', background\r\n\r\n\t\t// note that this always runs all conditions meaning\r\n\t\t// more than one rule can apply\r\n\t\t// TODO: warn about multiple hits (?)\r\n\t\tthis.state.metaData.rules.forEach(rule => {\r\n\t\t  if (rule.condition(scheduledHours))\r\n\t\t    background = rule.color\r\n\t\t})\r\n\r\n\t\t// TODO: optimize this\r\n\t\tif (Math.round(scheduledHours) !== 0)\r\n\t\t  tag = (\r\n\t\t    <div\r\n\t\t      className = 'dateCellTag'\r\n\t\t\t\t   style = {{\r\n\t\t\t\t     background: background,\r\n\t\t\t\t   }}\r\n\t\t      >\r\n\t\t      { scheduledHours.toFixed(1) + 'h'}\r\n\t\t    </div>\r\n\t\t  )\r\n\t\t\r\n\t\treturn (\r\n\t\t  <div\r\n\t\t    style={style}\r\n\t\t\t  onContextMenu = { e => {\r\n\t\t\t      // if the user misses slightly when attempting\r\n\t\t\t      // to remove an event the standard context menu\r\n\t\t\t      // pops up which is annoying\r\n\t\t\t      e.preventDefault()\r\n\t\t\t  }}\r\n\t\t    >\r\n\t\t    { tag }\r\n\t\t    { cellProps.children }\r\n\t\t  </div>\r\n\t\t)\r\n\t      },\r\n\t    }}\r\n\t  />\r\n\t</div>\r\n\r\n\t{ pickerPanel }\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nfunction moveEvent ({ event, start, end, isAllDay: droppedOnAllDaySlot },\r\n\t\t    events) {\r\n\r\n  //console.log(event, start, end, droppedOnAllDaySlot)\r\n\r\n  const idx = events.findIndex(elem => elem.id === event.id)\r\n  const updatedEvent = { ...event, start, end, isAllDay: false }\r\n\r\n  const nextEvents = [...events]\r\n  nextEvents.splice(idx, 1, updatedEvent)\r\n\r\n  return nextEvents\r\n}\r\n\r\n// this will only ever be called from the month view\r\nfunction addEvents (allSelected, events, selected) {\r\n\r\n  // in case of empty lists\r\n  if (!selected.resource || !selected.shift)\r\n    return undefined\r\n\r\n  // find the largest and then increment to guarantee a unique event ID\r\n  let eventId = 0\r\n  events.forEach(event => {\r\n    if (event.id > eventId)\r\n      eventId = event.id\r\n  })\r\n\r\n  eventId += 1\r\n  let newEvents = []\r\n  \r\n  allSelected.slots.forEach(slot => {\r\n    let selectedShift = selected.shift\r\n    \r\n    let startDate = slot\r\n    startDate.setHours(selectedShift.startHour, selectedShift.startMinute, 0)\r\n    let stopDate = moment(startDate).add(selectedShift.minuteLength, 'm').toDate()\r\n    let newEvent = { \r\n      start: startDate,\r\n      end: stopDate,\r\n      allDay: false,\r\n      id: eventId,\r\n      resourceId: selected.resource.id,\r\n      shiftId: selected.shift.id,\r\n    }\r\n    newEvents.push(newEvent)\r\n    eventId++\r\n  })\r\n\r\n  return events.concat(newEvents)\r\n\r\n}\r\n\r\nfunction addEvent(event, events) {\r\n\r\n  // find the largest and then increment to guarantee a unique event ID\r\n  let eventId = 0\r\n  events.forEach(ev => {\r\n    if (ev.id > eventId)\r\n      eventId = ev.id\r\n  })\r\n\r\n  event.id = eventId + 1\r\n  return events.concat(event)\r\n}\r\n\r\nfunction removeEvent (target, events) {\r\n  const newEventList = events.filter(elem => elem.id !== target.id)\r\n  return newEventList\r\n}\r\n\r\nfunction eventRender ({ event }, state) {\r\n\r\n  if (event.customTitle !== undefined) {\r\n    return (\r\n      <div>\r\n\t{ event.customTitle }\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  let resource = state.resources.find(res => res.id === event.resourceId)\r\n  if (resource === undefined)\r\n    resource = state.metaData.archive.resources\r\n    .find(res => res.id === event.resourceId)\r\n\r\n  let shift = state.shifts.find(sh => sh.id === event.shiftId)\r\n  if (shift === undefined)\r\n    shift = state.metaData.archive.shifts\r\n    .find(sh => sh.id === event.shiftId)\r\n  \r\n  return (\r\n      <div>\r\n\t{ resource.title + ', ' + shift.title }\r\n      </div>\r\n  )\r\n}\r\n\r\n\r\n// TODO: make a gradient background and let the rightmost part represent shift\r\n//       and the rest the resource\r\nfunction getEventProp (event, start, end, isSelected, state) {\r\n\r\n  // custom events don't have resources/shifts linked to them\r\n  if (event.customTitle !== undefined) {\r\n    return {\r\n      style: {\r\n\tbackground: event.color,\r\n\tcursor: 'grab',\r\n      },\r\n      className: 'eventPanel',\r\n    }\r\n  }\r\n  \r\n  let resource = state.resources.find(res => res.id === event.resourceId)\r\n\r\n  // in case a resource has been removed\r\n  if (resource === undefined)\r\n    resource = state.metaData.archive.resources.find(res => res.id === event.resourceId)\r\n\r\n  if (!resource) {\r\n    console.log('no resource found: ', event)\r\n    console.log(state.resources)\r\n    return ''\r\n  }\r\n\r\n  return {\r\n    style: {\r\n      background: resource.color,\r\n      cursor: 'grab',\r\n    },\r\n    className: 'eventPanel',\r\n  }\r\n}\r\n\r\n\r\nexport {\r\n  moveEvent,\r\n  removeEvent,\r\n  eventRender,\r\n  getEventProp,\r\n  addEvent,\r\n  addEvents,\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceworker'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\nserviceWorker.register()\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAgUGDw8ftS2KAAACkklEQVR42u2dPWsUURhGH7+IK4LxIyiiWKXTSiGFWNnYWlikF2v/iB9FfkVQhPQ2BvEHqGlSLojLbkKaYGPYVBbqO8zdyztzlHnOdMOdu+eeZXdndpNdKZuRNjTTvINtpg2N0n3Ted3J4n9tr+jltTPuNMA4W/dkeoBLneZNnz0/wH+GA9ACNA5AC9AMPsDpXm7lmz5WHHVf1/uNkcNhcPqyVTXTVjDTYbbu4B8CDkAL0Aw+QNmrwCk90KpOVM/4SPsVbufD2Z8VHTvXrrZ1lBNppO1OL3G72j7obMl9285zPc0p2TO3dKBPbYNKngPu0iup5l77kJIAZ+h1VFNgPvhXAQegBWgcgBagKQmQdD4FUGBeEuArvY5qPudMs6wd/LS2ZtvRhfbFlV3gnNNj3QDvyRrGeqcftIQx/zxlzwG/s6vLtHYDe1pd9JCazwWWdZFeaQMVZyw+E6QFaByAFqBxAFqAxgFoARoHoAVoHIAWoBl8gMy/Evui78Heh8El9yR8u/KOrv61b673wchrut1XoIhpw5uQ6+Hoo2DkZjhyMxgZX+CuNxhMF1/M4B8CDkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQDD5A5n+Pr+lnsDf6urabehLujY6ORq7lSdd8m9xUV/IEUplpZdFDBv8QcABagMYBaAEaB6AFaByAFqBxAFqAxgFoAZqaADU/nNYPe/0EeEuvs5E3/dzMkl5qgv+Axp/bRC+0tPhijgFmD/LwO3VKLgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wMi0wNVQwNjoxNToxNSswMDowMBuhWXUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDItMDVUMDY6MTU6MTUrMDA6MDBq/OHJAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\""],"sourceRoot":""}