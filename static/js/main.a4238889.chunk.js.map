{"version":3,"sources":["img/trashcan.png","img/plus.png","img/settings.png","storage.js","utilities.js","savepanel.js","modalmenu.js","pickerpanel.js","editeventmodal.js","App.js","events.js","index.js"],"names":["module","exports","ALLOWED_TYPES","loadResources","resourceList","window","localStorage","getItem","parseJSON","JSON","parse","_","Array","loadEvents","eventList","map","event","start","Date","end","loadShifts","shiftList","loadMetaData","metaData","archive","resources","shifts","storeData","data","type","includes","TypeError","setItem","stringify","saveBlob","allData","events","created","Blob","moment","extendMoment","Moment","timePad","number","toString","length","shiftComparer","first","second","startHour","startMinute","resourceComparer","title","sortComparer","Error","SavePanel","this","state","loadError","className","href","URL","createObjectURL","download","id","accept","onChange","preventDefault","target","files","text","then","blob","err","loadBlob","props","insert","closeModal","style","width","height","opacity","overflow","position","zIndex","htmlFor","Component","ModalMenu","randomColor","Math","random","renderResources","optionsList","resource","i","key","value","onSave","updateElement","onValidate","validationMessage","saveButtonLabel","cancelButtonLabel","onHoverCssClass","display","animation","color","onClose","enableAlpha","textValues","onClick","showTimer","isExecuting","src","trashcan","alt","addResourceRow","textAlign","marginTop","create","addBubble","push","renderShifts","shiftOptions","shift","time","onFocusChange","focus","setState","timePickerOpen","onTimeChange","hour","minute","replacement","update","$set","withoutIcon","focused","trigger","e","minuteLength","Fragment","addShiftRow","picked","newData","ShiftInfoBlock","stop","setHours","add","toDate","fromTo","getHours","getMinutes","PickerPanel","matchId","selected","setSelected","fontStyle","cursor","whiteSpace","res","background","border","margin","boxShadow","borderRadius","undefined","setOptionsModal","optionsIcon","bottom","right","EditEventModal","generalErrorPanel","padding","dateTimePicker","dt","mindate","newMoment","isAfter","dateError","isBefore","minStep","hourStep","prevMonthIcon","nextMonthIcon","getFullYear","getMonth","getDate","optionsTable","startChoosing","endChoosing","eventColor","choice","buttonsPanel","justifyContent","marginBottom","titleValue","customTitle","previousTitle","titleInput","onSubmit","ev","editEvent","resourceId","shiftId","addEvent","titleError","fontWeight","ref","instance","placeholder","newError","locale","localizer","momentLocalizer","DragCalendar","withDragAndDrop","Calendar","App","newElement","index","findIndex","elem","newList","$splice","newEventList","sort","optionsModalOpen","editEventModalOpen","view","viewDate","pickerPanel","isOpen","shouldCloseOnOverlayClick","overlayClassName","onAfterOpen","document","getElementById","filter","onRequestClose","ariaHideApp","element","argElement","ele","concat","splice","find","slice","newId","forEach","newElementList","newEvent","eventId","eventBasis","resizableAccessor","startAccessor","endAccessor","onDrillDown","date","console","log","onEventDrop","eventObj","idx","isAllDay","updatedEvent","nextEvents","moveEvent","onDragStart","onSelectSlot","selection","allSelected","newEvents","slots","slot","selectedShift","startDate","allDay","addEvents","onDoubleClickEvent","resolvedColor","resolvedTitle","sh","defaultView","defaultDate","eventPropGetter","isSelected","getEventProp","selectable","views","onView","onNavigate","newDate","step","popup","components","eventWrapper","children","onContextMenu","args","eventRender","dateCellWrapper","cellProps","calendarDay","endOf","scheduledHours","firstRange","range","secondRange","overlaps","intersect","valueOf","timeOverlap","tag","round","toFixed","flex","borderLeft","ReactDOM","render"],"mappings":"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","file":"static/js/main.a4238889.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAQAAABpN6lAAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAgUGDw8ftS2KAAACkklEQVR42u2dPWsUURhGH7+IK4LxIyiiWKXTSiGFWNnYWlikF2v/iB9FfkVQhPQ2BvEHqGlSLojLbkKaYGPYVBbqO8zdyztzlHnOdMOdu+eeZXdndpNdKZuRNjTTvINtpg2N0n3Ted3J4n9tr+jltTPuNMA4W/dkeoBLneZNnz0/wH+GA9ACNA5AC9AMPsDpXm7lmz5WHHVf1/uNkcNhcPqyVTXTVjDTYbbu4B8CDkAL0Aw+QNmrwCk90KpOVM/4SPsVbufD2Z8VHTvXrrZ1lBNppO1OL3G72j7obMl9285zPc0p2TO3dKBPbYNKngPu0iup5l77kJIAZ+h1VFNgPvhXAQegBWgcgBagKQmQdD4FUGBeEuArvY5qPudMs6wd/LS2ZtvRhfbFlV3gnNNj3QDvyRrGeqcftIQx/zxlzwG/s6vLtHYDe1pd9JCazwWWdZFeaQMVZyw+E6QFaByAFqBxAFqAxgFoARoHoAVoHIAWoBl8gMy/Evui78Heh8El9yR8u/KOrv61b673wchrut1XoIhpw5uQ6+Hoo2DkZjhyMxgZX+CuNxhMF1/M4B8CDkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQOAAtQOMAtACNA9ACNA5AC9A4AC1A4wC0AI0D0AI0DkAL0DgALUDjALQAjQPQAjQOQAvQDD5A5n+Pr+lnsDf6urabehLujY6ORq7lSdd8m9xUV/IEUplpZdFDBv8QcABagMYBaAEaB6AFaByAFqBxAFqAxgFoAZqaADU/nNYPe/0EeEuvs5E3/dzMkl5qgv+Axp/bRC+0tPhijgFmD/LwO3VKLgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wMi0wNVQwNjoxNToxNSswMDowMBuhWXUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDItMDVUMDY6MTU6MTUrMDA6MDBq/OHJAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfkAg0HFhzEfYeUAAADIklEQVRo3sWZz08TQRTHP10b0YB08WTrAaIehZDij5r4R5gY4hXwRA2RcCESTDgZFENo1DvxR2IRf9yBCxzsQQsBLxIUPAhcqNuCJ5T1sGwKMvtjtrvd9y7tTmc+332zfTvzJoKsJUjSRisJYqjEgCIaRX6yQJ4869IjurbLPGYN3cFXGeGS3+gYg3xzRB/0FQaJ+QOvo5+CFNz0EsOolcEjpD3CTS+QJuIV38R0RXDT57jgBX+bki94YzK6ZEM/5Bvc9AyKW3wNr3zH6+hMctIdfiYQvI7ONDXOwX8RGF5HJ+s0ESOB4nV0hu2f/KDxOjqdh0NetiYWOeXyQf3NGF/4u//tGBfppdZl321aWBPNvvuHb5fUkf4pdl33nxFlx7REEOeEdzYrMUL6/871bEl0nxAKyEqM8Mt8TZl/il5Ou5xBf0yl56CAGL1VxQP0GTEwBPTQUHUBKnfKAjqqjgfoImIIuML5UAScI2kIuBUKHoOsADdDE9AOCmdpDE1AE3GFZGh4gGTUVsAfPrIpuJ4T/jonXP/GSRG1FgAfLNPltuCV48VS7Fgy3imcseyYsbhTWcuRsWyLKzZ7lyVf8ACLli2qYpOE93wTYD2Sqvi1hfRoDQp6qAL2FIqhCtAUNMtG11spR7MeqWgnoNk3AS3WEYD3lklipwqJ6G2UeW5YdKxljhwbgpYco4KrfULBCa7apOKFKHkb7VGuS91pu3R0Piu2AoK3vMK6aJtUJVtlUwEmQxMwYfxDs6EJyBoCPrESCn6ZeTNHjYciYBxMAU8oVB1f4GlZQMlmzRKUjbJdFgBjVY6BxjPjgymgxH2J7nHh1YTECANHX4KVlmiuSZRopssLeO9FqgxLB4pUzdx1XaQq0cIPcVNXQIW5w95hp+5h4PgH9uGJ8DxQ/GvnhV6NT8cUIp9yLlYDHOdlIPg3nHD5mIZ9YGFYp49HNkVvZbBGpnzBz3o7tDKmoluqhHvUt+j2fmxnWB39HkVsMVTpwaVp9QywLAX/yj3Xad21tfGIVUf0dx7KFL7k5ydOkiStJFBRUQENDY31/eP7Dbnh/gG979F//hqDMwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wMi0xM1QwNzoyMjoyOCswMDowMIZmOQwAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDItMTNUMDc6MjI6MjgrMDA6MDD3O4GwAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,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\"","const ALLOWED_TYPES = [ 'shifts', 'events', 'resources', 'metaData' ]\r\n\r\n\r\n// A resource in this case is just a person\r\nfunction loadResources(resourceList = window\r\n\t\t       .localStorage\r\n\t\t       .getItem('schedule_resources'),\r\n\t\t       parseJSON = true) {\r\n\r\n  try {\r\n    if (parseJSON) resourceList = JSON.parse(resourceList)\r\n\r\n    // in case there are no resources stored at all\r\n    if (!resourceList) return []\r\n  }\r\n  catch(_) { return [] }\r\n\r\n  if (!resourceList instanceof Array) { return [] }\r\n  else return resourceList\r\n}\r\n\r\nfunction loadEvents(eventList = window\r\n\t\t    .localStorage\r\n\t\t    .getItem('schedule_events'),\r\n\t\t    parseJSON = true) {\r\n\r\n  try {\r\n    if (parseJSON) eventList = JSON.parse(eventList)\r\n\r\n    // The dates get stored as strings and the parsing\r\n    // doesn't turn them back into date objects automatically\r\n    eventList.map(event => {\r\n      event.start = new Date(event.start)\r\n      event.end = new Date(event.end)\r\n      return event\r\n    })\r\n  }\r\n\r\n  catch(_) { return [] }\r\n\r\n  if (!eventList instanceof Array) { return [] }\r\n  else return eventList\r\n}\r\n\r\nfunction loadShifts(shiftList = window\r\n\t\t    .localStorage\r\n\t\t    .getItem('schedule_shifts'),\r\n\t\t    parseJSON = true) {\r\n\r\n  if (!shiftList) return []\r\n\r\n  try { if(parseJSON) shiftList = JSON.parse(shiftList) }\r\n  catch(_) { return [] }\r\n\r\n  if (!shiftList instanceof Array) { return [] }\r\n  else return shiftList\r\n}\r\n\r\nfunction loadMetaData(metaData = window\r\n\t\t      .localStorage\r\n\t\t      .getItem('schedule_metaData'),\r\n\t\t      parseJSON = true) {\r\n\r\n  try {\r\n    if (parseJSON) metaData = JSON.parse(metaData)\r\n\r\n    if (!metaData.archive.resources)\r\n      metaData.archive.resources = []\r\n\r\n    if (!metaData.archive.shifts)\r\n      metaData.archive.shifts = []\r\n  }\r\n  catch(_) {\r\n    return {\r\n      archive: {\r\n\tresources: [],\r\n\tshifts: [],\r\n      }\r\n    }\r\n  }\r\n\r\n  return metaData\r\n}\r\n\r\n// type = 'resources' | 'shifts' | 'metaData'\r\nfunction storeData(data, type) {\r\n  if (!ALLOWED_TYPES.includes(type)) {\r\n    throw new TypeError('Invalid type: ', type)\r\n  }\r\n      \r\n  window.localStorage\r\n    .setItem(`schedule_${type}`, JSON.stringify(data))\r\n}\r\n\r\n// a blob with all data that is saved in the localStorage\r\n// meant for the save-to-file anchor tag\r\nfunction saveBlob() {\r\n  const allData = {\r\n    metaData: loadMetaData(),\r\n    shifts: loadShifts(),\r\n    events: loadEvents(),\r\n    resources: loadResources(),\r\n    created: new Date(),\r\n  }\r\n\r\n  return new Blob([JSON.stringify(allData)],\r\n\t\t  { type: 'json' })\r\n}\r\n\r\nfunction loadBlob(blob) {\r\n  try {\r\n    blob = JSON.parse(blob)\r\n    blob.resources = loadResources(blob.resources, false)\r\n    blob.shifts = loadShifts(blob.shifts, false)\r\n    blob.events = loadEvents(blob.events, false)\r\n    blob.metaData = loadMetaData(blob.metaData, false)\r\n  }\r\n  catch(err) { return undefined  }\r\n\r\n  storeData(blob.resources, 'resources')\r\n  storeData(blob.shifts, 'shifts')\r\n  storeData(blob.events, 'events')\r\n  storeData(blob.metaData, 'metaData')\r\n\r\n  blob.created = new Date(blob.created)\r\n\r\n  return blob\r\n}\r\n\r\nexport {\r\n  loadResources,\r\n  loadEvents,\r\n  loadShifts,\r\n  loadMetaData,\r\n  loadBlob,\r\n  storeData,\r\n  saveBlob,\r\n}\r\n","import Moment from 'moment'\r\nimport { extendMoment } from 'moment-range'\r\n\r\nconst moment = extendMoment(Moment)\r\n\r\n// type = 'shifts' | 'resources'\r\nfunction create(element, type, state) {\r\n\r\n  if (!(type === 'resources' || type === 'shifts'))\r\n    throw new TypeError('Invalid type: ', type)\r\n  \r\n\r\n  // make sure that the new ID is unique by making it larger than every other ID\r\n  // including removed resources/shifts since those can still have events tied to them\r\n  let newId = 0\r\n  state[type].forEach(ele => { if (ele.id >= newId) { newId = ele.id }})\r\n  state.metaData.archive[type]\r\n    .forEach(ele => { if (ele.id >= newId) { newId = ele.id }})\r\n  newId++;\r\n\r\n  element.id = newId\r\n\r\n  const newList = state[type].concat(element).sort(sortComparer(type))\r\n  \r\n  return {\r\n    newElementList: newList,\r\n    newElement: element,\r\n  }\r\n}\r\n\r\nfunction archive(argElement, type, state) {\r\n\r\n  if (type !== 'resources' && type !== 'shifts')\r\n    throw new TypeError('Invalid type: ', type)\r\n\r\n\r\n  const index = state[type].findIndex(ele => ele.id === argElement.id)\r\n  state.metaData.archive[type] = state.metaData.archive[type].concat(argElement)\r\n  state[type].splice(index, 1)\r\n\r\n  return {\r\n    [type]: state[type],\r\n    metaData: state.metaData,\r\n  }\r\n}\r\n\r\nfunction timePad(number)\r\n{\r\n  if (number.toString().length === 2) return number.toString()\r\n  return (number < 10) ? \"0\" + number : number.toString()\r\n}\r\n\r\nfunction shiftComparer(first, second) {\r\n  if (first.startHour === second.startHour) {\r\n    return first.startMinute - second.startMinute\r\n  }\r\n  \r\n  else return first.startHour - second.startHour\r\n}\r\n\r\nfunction resourceComparer(first, second) {\r\n\r\n  // the same as the default method used by sort()\r\n  return first.title > second.title\r\n}\r\n\r\nfunction sortComparer(type) {\r\n  if (type === 'resources') return resourceComparer\r\n  else if (type === 'shifts') return shiftComparer\r\n\r\n  else throw new Error('Invalid sort type: ', type)\r\n}\r\n\r\n// overlap time in ms\r\nfunction timeOverlap(first, second) {\r\n  const firstRange = moment.range(first.start, first.end)\r\n  const secondRange = moment.range(second.start, second.end)\r\n\r\n  if (!firstRange.overlaps(secondRange)) return 0\r\n  return firstRange.intersect(secondRange).valueOf()\r\n  \r\n}\r\n\r\nexport {\r\n  create,\r\n  archive,\r\n  timePad,\r\n  sortComparer,\r\n  timeOverlap\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nimport { saveBlob, loadBlob } from './storage'\r\n\r\nclass SavePanel extends Component {\r\n\r\n  loadErrorPanel() {\r\n    if (this.state.loadError) {\r\n      return (\r\n\t<div>\r\n\t  \r\n\t</div>\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className = 'savePanel'>\r\n\t<a\r\n\t  href = { URL.createObjectURL(saveBlob()) }\r\n\t  download = 'schedule.json'\r\n\t>\r\n\t  <button className = 'fileButton'>Spara</button>\r\n\t</a>\r\n\r\n\t<input\r\n\t  type = 'file'\r\n\t  id = 'file'\r\n\t  className = 'inputfile'\r\n\t  accept = '.json'\r\n\t\r\n \t  onChange = { event => {\r\n\t      event.preventDefault()\r\n\t      event.target.files[0].text()\r\n\t\t   .then(data => {\r\n\r\n\t\t     // parses from JSON to actual data\r\n\t\t     data = loadBlob(data)\r\n\t\t     this.props.insert(data)\r\n\t\t     this.props.closeModal()\r\n\t\t   })\r\n\t  }}\r\n\t\r\n\t  style = {{\r\n\t    width: '0.1px',\r\n\t    height: '0.1px',\r\n\t    opacity: '0',\r\n\t    overflow: 'hidden',\r\n\t    position: 'absolute',\r\n\t    zIndex: '-1',\r\n\t  }}\r\n\t/>\r\n\t<label\r\n\t  htmlFor = 'file'\r\n\t  className = 'fileButton clickable'\r\n\t>\r\n\t  Öppna\r\n\t</label>\r\n\t\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default SavePanel\r\n","import React, { Component } from 'react'\r\nimport update from 'immutability-helper'\r\n\r\nimport EasyEdit from 'react-easy-edit'\r\nimport InlineConfirmButton from 'react-inline-confirm'\r\n\r\nimport ColorPicker from 'rc-color-picker'\r\nimport 'rc-color-picker/assets/index.css'\r\n\r\nimport TimePicker from 'react-times'\r\nimport 'react-times/css/material/default.css'\r\n\r\nimport { timePad } from './utilities'\r\n\r\nimport trashcan from './img/trashcan.png'\r\nimport addBubble from './img/plus.png'\r\n\r\nimport './modalmenu.css'\r\n\r\nimport SavePanel from './savepanel'\r\n\r\nclass ModalMenu extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      picked : {\r\n\thour: 0,\r\n\tminute: 0,\r\n      },\r\n      timePickerOpen: false,\r\n      shifts: this.props.shifts,\r\n      time: {\r\n\thour: 21,\r\n\tminute: 5,\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  randomColor = () => { return \"#\"+((1<<24)*Math.random()|0).toString(16) }\r\n\r\n  // TODO: remove the focus outline from the inline confirm button\r\n  renderResources = () => {\r\n\r\n    let optionsList = (\r\n      this.props.resources.map((resource, i) => {\r\n\treturn (\r\n\t  <div className = \"option\" key = { i }>\r\n\t    <EasyEdit\r\n\t      type = \"text\"\r\n\t      value = { resource.title  }\r\n\t      onSave = {\r\n\t\ttext => {\r\n\t\t  resource.title = text\r\n\t\t  this.props.updateElement(resource, 'resources')\r\n\t\t}}\r\n\t      onValidate = { text => text.length > 0 }\r\n\t      validationMessage = \"Namnet kan inte vara tomt\"\r\n\r\n\t      saveButtonLabel = \"Spara\"\r\n\t      cancelButtonLabel = \"Avbryt\"\r\n\t      onHoverCssClass = \"clickable\"\r\n\t    />\r\n\t    <div className = \"optionSidePanel\">\r\n\t      <div style={{ display: \"inline-table\" }}>\r\n\t\t<ColorPicker\r\n\t\t  animation = \"slide-up\"\r\n\t\t  color = { resource.color }\r\n\t\t  onClose = { color => {\r\n\t\t      resource.color = color.color\r\n\t\t      this.props.updateElement(resource, 'resources')\r\n\t\t  }}\r\n\t\t  enableAlpha = { false }\r\n\t\t/>\r\n\t      </div>\r\n\r\n\t      <InlineConfirmButton\r\n\t\tclassName = \"confirmButton\"\r\n\t\ttextValues = {['', 'Ta bort?', '']}\r\n\t\tonClick = { () => this.props.archive(resource, 'resources') }\r\n\t\tshowTimer\r\n\t\tisExecuting = { false }\r\n\t      >\r\n\t\t<img\r\n\t\t  src = { trashcan }\r\n\t\t  alt = \"[Delete]\"\r\n\t\t  className = \"clickable\"\r\n\t\t/>\r\n\t      </InlineConfirmButton>\r\n\t    </div>\r\n\t  </div>\r\n\t)\r\n      })\r\n    )\r\n\r\n    const addResourceRow = (\r\n      <div\r\n\tstyle = {{\r\n\t  textAlign: 'center',\r\n\t  marginTop: '5px',\r\n\t}}\r\n\tonClick = { () => {\r\n\t    this.props.create({\r\n\t      title: 'Person',\r\n\t      color: this.randomColor(),\r\n\t    }, 'resources')\r\n\t}}\r\n\tclassName = \"clickable\"\r\n\tkey = { optionsList.length }\r\n      >\r\n\t<img\r\n\t  src = { addBubble }\r\n\t  alt = \"Lägg till\"\r\n\t  style = {{ height: '20px' }}\r\n\t/>\r\n      </div>\r\n    )\r\n\r\n    optionsList.push(addResourceRow)\r\n    return optionsList\r\n  }\r\n\r\n  renderShifts = () => {\r\n    let shiftOptions = (\r\n      this.props.shifts.map((shift, i) => {\r\n\treturn (\r\n\t  <tr key = { i }>\r\n\t    <td>\r\n\t      <EasyEdit\r\n\t\ttype = \"text\"\r\n\t\tvalue = { shift.title }\r\n\t\tonSave = {\r\n\t\t  text => {\r\n\t\t    if (text.length === 0)\r\n\t\t      return\r\n\t\t    \r\n\t\t    shift.title = text\r\n\t\t    this.props.updateElement(shift, 'shifts')\r\n\t\t  }\r\n\t\t}\r\n\r\n\t\tonValidate = { text => text.length > 0 }\r\n\t\tvalidationMessage = \"Namnet kan inte vara tomt\"\r\n\t      \r\n\t\tsaveButtonLabel = \"Spara\"\r\n\t\tcancelButtonLabel = \"Avbryt\"\r\n\t\tonHoverCssClass = \"clickable\"\r\n\t      />\r\n\t    </td>\r\n\r\n\t    <td>\r\n\t      <TimePicker\r\n\t\ttime = { shift.startHour + ':' + shift.startMinute }\r\n\t\tonFocusChange = { focus => {\r\n\t\t  // this only triggers when the picker closes for some reason\r\n\t\t    this.setState({\r\n\t\t      timePickerOpen: false,\r\n\t\t    })\r\n\t\t}}\r\n\t      \r\n\t\tonTimeChange = { ({hour, minute}) => {\r\n\t\t    const replacement = update(shift, {\r\n\t\t      startHour: {$set: hour},\r\n\t\t      startMinute: {$set: minute}\r\n\t\t    })\r\n\r\n\t\t    this.props.updateElement(replacement, 'shifts')\r\n\t\t}}\r\n\t      \r\n\t\twithoutIcon\r\n\t\tfocused = { this.state.timePickerOpen === shift.id }\r\n\t\ttrigger = {(\r\n\t\t    <div\r\n\t\t    onClick = { e => {\r\n\t\t\tthis.setState({\r\n\t\t\t  timePickerOpen: shift.id,\r\n\t\t\t})\r\n\t\t    }}\r\n\t\t\t      className = \"clickable\"\r\n\t\t      >\r\n\t\t      {\r\n\t\t\t`${timePad(shift.startHour)}:`\r\n\t\t\t+ `${timePad(shift.startMinute)}`\r\n\t\t      }\r\n\t\t    </div>\r\n\t\t)}\r\n\t      />\r\n\t    </td>\r\n\t    \r\n\t    <td>\r\n\t      <EasyEdit\r\n\t\ttype = \"number\"\r\n\r\n\t\tvalue = {\r\n\t\t  // the component throws an error unless\r\n\t\t  // supplied with a string\r\n\t\t  shift.minuteLength.toString()\r\n\t\t}\r\n\r\n\t      onSave = {\r\n\t\tvalue => {\r\n\t\t  shift.minuteLength = value\r\n\t\t  this.props.updateElement(shift, 'shifts')\r\n\t\t}}\r\n\t      \r\n\t\tonValidate = { value => value > 0 }\r\n\t\tvalidationMessage = \"Måste vara en siffra > 0\"\r\n\r\n\t\tsaveButtonLabel = \"Spara\"\r\n\t\tcancelButtonLabel = \"Avbryt\"\r\n\t\tonHoverCssClass = \"clickable\"\r\n\t      />\r\n\t    </td>\r\n\r\n\t    <td>\r\n\t      <div className = \"optionSidePanel\">\r\n\t\t<InlineConfirmButton\r\n\t\t  className = \"confirmButton\"\r\n\t\t  textValues = {['', 'Ta bort?', '']}\r\n\t\t  onClick = { () => this.props.archive(shift, 'shifts') }\r\n\t\t  showTimer\r\n\t\t  isExecuting = { false }\r\n\t\t>\r\n\t\t  <img\r\n\t\t    src = { trashcan }\r\n\t\t    alt = \"[Delete]\"\r\n\t\t    className = \"clickable\"\r\n\t\t  />\r\n\t\t  \r\n\t\t</InlineConfirmButton>\r\n\t      </div>\r\n\t    </td>\r\n\t  </tr>\r\n\t)\r\n      })\r\n    )\r\n\r\n    return (\r\n      <React.Fragment>\r\n\t{ shiftOptions }\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  addShiftRow = () => {\r\n    return (\r\n      <div\r\n\tstyle = {{\r\n\t  textAlign: 'center',\r\n\t  marginTop: '5px',\r\n\t}}\r\n\tonClick = { () => this.props.create(\r\n\t    {\r\n\t      title: 'Pass',\r\n\t      startHour: 13,\r\n\t      startMinute: 37,\r\n\t      minuteLength: 420,\r\n\t    }, 'shifts')\r\n\t}\r\n\tclassName = \"clickable\"\r\n      >\r\n\t<img\r\n\t  src = { addBubble }\r\n\t  alt = \"Lägg till\"\r\n\t  style = {{ height: '20px' }}\r\n\t/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // TODO: make a 75% border around the close bubble\r\n  render() {   \r\n    return (\r\n      <div style = {{ display: \"flex\" }}>\r\n\t<div id =\"closeBubble\" onClick = { this.props.closeModal }>\r\n\t  <div className = \"__arc\">\r\n\t    X\r\n\t  </div>\r\n\t</div>\r\n\t<div className = \"modalPanel\">\r\n\t  <div className = \"boxLabel\">Resurser</div>\r\n\t  <div className = \"pickerBox\">\r\n\t    { this.renderResources() }\r\n\t  </div>\r\n\t</div>\r\n\r\n\t<div className = \"modalPanel\">\r\n\t  <div className = \"boxLabel\">Pass</div>\r\n\t  <div className = \"pickerBox\">\r\n\t    <table className = \"panelTable\">\r\n\t      <thead>\r\n\t\t<tr>\r\n\t\t  <th style = {{textAlign: \"left\" }}>Namn</th>\r\n\t\t  <th style = {{textAlign: \"center\" }} >Start</th>\r\n\t\t  <th>Längd (min)</th>\r\n\t\t  <th></th>\r\n\t\t</tr>\r\n\t      </thead>\r\n\t      <tbody>\r\n\t\t{ this.renderShifts() }\r\n\t      </tbody>\r\n\t    </table>\r\n\t    { this.addShiftRow() }\r\n\r\n\t  </div>\r\n\t</div>\r\n\r\n\t<div className = \"modalPanel\">\r\n\t  <div className = \"boxLabel\">Lagring</div>\r\n\t  <div className = \"pickerBox\">\r\n\t    <SavePanel\r\n\t      insert = { newData => this.props.insert(newData) }\r\n\t      closeModal = { this.props.closeModal }\r\n\t    />\r\n\t  </div>\r\n\t</div>\r\n\t\r\n\t\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default ModalMenu\r\n","import React, { Component } from 'react'\r\nimport update from 'immutability-helper'\r\nimport moment from 'moment'\r\n\r\nimport optionsIcon from './img/settings.png'\r\n\r\nimport { timePad } from './utilities'\r\n\r\nclass PickerPanel extends Component {\r\n\r\n  matchId(id, type) {\r\n    if (this.props.selected\r\n\t&& this.props.selected[type]\r\n\t&& this.props.selected[type].id !== undefined) {\r\n      return id === this.props.selected[type].id\r\n    }\r\n      \r\n  }\r\n  \r\n  renderShifts = () => {\r\n\r\n    if (!this.props.shifts || this.props.shifts.length === 0)\r\n      return (\r\n\t<div\r\n\t  style = {{\r\n\t    fontStyle: 'italic',\r\n\t    color: '#878787',\r\n\t    textAlign: 'center',\r\n\t    cursor: 'default',\r\n\t    whiteSpace: 'nowrap',\r\n\t  }}\r\n\t>\r\n\t  Inga skift tillagda\r\n\t</div>\r\n      )\r\n    \r\n    else return (\r\n      this.props.shifts.map((shift, i) => {\r\n\treturn (\r\n\t  <div\r\n\t    className =\r\n\t    {\r\n\t      `${this.matchId(shift.id, 'shift') ? ' selected' : ''}`\r\n\t      + ' option clickable'\r\n\t    }\r\n\t    onClick = {() => {\r\n\t\t\r\n\t\tthis.setState({\r\n\t\t  selected: update(this.props.selected, { shift: {$set: shift}})\r\n\t\t})\r\n\t\t\r\n\t\tthis.props.setSelected({\r\n\t\t  shift: shift,\r\n\t\t  resource: this.props.selected.resource\r\n\t\t})\r\n\t    }}\r\n\t    key = { i } >\r\n\t    <div className = \"shiftTitle\">{ shift.title }</div>\r\n\t    <ShiftInfoBlock className = \"shiftInfo\" shift = { shift } />\r\n\t  </div>\r\n\t)\r\n\t\r\n      })\r\n    )\r\n  }\r\n\r\n  renderResources = () => {\r\n\r\n    if (!this.props.resources || this.props.resources.length === 0)\r\n      return (\r\n\t<div\r\n\t  style = {{\r\n\t    fontStyle: 'italic',\r\n\t    color: '#878787',\r\n\t    textAlign: 'center',\r\n\t    cursor: 'default',\r\n\t    whiteSpace: 'nowrap',\r\n\t  }}\r\n\t>\r\n\t  Inga resurser tillagda\r\n\t</div>\r\n      )\r\n    \r\n    else return (\r\n      this.props.resources.map((res, i) => {\r\n\treturn (\r\n\t  <div\r\n\t    className =\r\n\t    {\r\n\t      `${this.matchId(res.id, 'resource') ? ' selected' : ''}`\r\n\t      + ' option clickable'\r\n\t    }\r\n\t    \r\n\t    onClick = {() => {\r\n\t\tthis.setState({\r\n\t\t  selected: update(this.props.selected, { resource: {$set: res}})\r\n\t\t})\r\n\r\n\t\tthis.props.setSelected({\r\n\t\t  shift: this.props.selected.shift,\r\n\t\t  resource: res,\r\n\t\t})\r\n\t    }}\r\n\t    key = { i } >\r\n\t    <div>{ res.title }</div>\r\n\t    <div\r\n\t      style = {{\r\n\t\twidth: '15px',\r\n\t\tbackground: res.color,\r\n\t\tborder: '1px solid #606060',\r\n\t\tmargin: '2px',\r\n\t\tboxShadow: '0 0 0 2px #fff inset',\r\n\t\tborderRadius: '2px',\r\n\t      }}\r\n\t    />\r\n\t  </div>\r\n\t)\r\n      }) \r\n    )\r\n  }\r\n\r\n  render() {    \r\n    return (\r\n      <div id = \"sideContainer\">\r\n\t<div className = \"boxLabel\">Pass</div>\r\n\t<div className = \"pickerBox\">\r\n\t  { this.renderShifts() }\r\n\t</div>\r\n\t\r\n\t<div className = \"boxLabel\">Resurser</div>\r\n\t<div className = \"pickerBox\">\r\n\t  { this.renderResources() }\r\n\t</div>\r\n\t<img\r\n\t  onClick = { () => this.props.setOptionsModal(true) }\r\n\t  src = { optionsIcon }\r\n\t  alt = '[Options]'\r\n\t  style = {{\r\n\t    position: 'absolute',\r\n\t    bottom: '10px',\r\n\t    right: '10px',\r\n\t    width: '30px',\r\n\t    cursor: 'pointer',\r\n\t  }}\r\n\t/>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction ShiftInfoBlock(props) {\r\n\r\n  let stop = new Date()\r\n  stop.setHours(props.shift.startHour, props.shift.startMinute, 0)\r\n  stop = moment(stop).add(props.shift.minuteLength, 'm').toDate()\r\n  const fromTo = timePad(props.shift.startHour) + ':' + \r\n\t\t timePad(props.shift.startMinute) + ' - ' +\r\n\t\t timePad(stop.getHours()) + ':' +\r\n\t\t timePad(stop.getMinutes())\r\n  \r\n  return (\r\n    <div className = { props.className }>\r\n      { fromTo }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PickerPanel\r\n","import React, { Component } from 'react'\r\nimport moment from 'moment'\r\n\r\nimport ColorPicker from 'rc-color-picker'\r\nimport 'rc-color-picker/assets/index.css'\r\n\r\nimport InputMoment from 'input-moment'\r\nimport 'input-moment/dist/input-moment.css'\r\n\r\nimport { timePad } from './utilities'\r\n\r\nimport './editeventmodal.css'\r\n\r\n\r\nclass EditEventModal extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const color = this.props.event.color === undefined ?\r\n\t\t  this.randomColor() : this.props.event.color\r\n\r\n    let title, titleValue\r\n    if (this.props.event.title === undefined &&\r\n\tthis.props.event.customTitle === undefined) {\r\n      title = 'Titel'\r\n      titleValue = ''\r\n    }\r\n    \r\n\r\n    else {\r\n      title = this.props.event.title !== undefined ?\r\n\t      this.props.event.title : this.props.event.customTitle\r\n      titleValue = title\r\n    }\r\n\r\n    this.state = {\r\n      eventColor: color,\r\n      start: this.props.event.start,\r\n      end: this.props.event.end,\r\n      customTitle: titleValue,\r\n      previousTitle: title,\r\n      startChoosing: false,\r\n      endChoosing: false,\r\n    }\r\n    \r\n  }\r\n\r\n  componentDidMount() {\r\n    this.titleInput.focus()\r\n  }\r\n\r\n  randomColor = () => { return \"#\"+((1<<24)*Math\r\n    .random()|0).toString(16) }\r\n\r\n  generalErrorPanel = type => {\r\n    if (this.state[type] === undefined)\r\n      return ''\r\n\r\n    else return (\r\n      <div\r\n\tstyle = {{\r\n\t  textAlign: 'center',\r\n\t  margin: '0px 0px 6px',\r\n\t  background: '#ffa5a5',\r\n\t  padding: '4px 0 4px 0',\r\n\t}}\r\n      >\r\n\t{ this.state[type] }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // target = \"start\" | \"end\"\r\n  dateTimePicker = ({ trigger, target }) => {\r\n\r\n    let dt = this.state[target]\r\n\r\n    if (!trigger)\r\n      return (\r\n\t  <div\r\n\t    className = 'clickable'\r\n\t    style = {{\r\n\t      display: 'inline-table',\r\n\t      padding: '0px 4px 0px 4px',\r\n\t    }}\r\n\t    onClick = { () => {\r\n\t\tthis.setState({\r\n\t\t  [`${target}Choosing`]: true,\r\n\t\t})\r\n\t    }}\r\n\t  >\r\n\t    {\r\n\t      dt.getFullYear() + '-' +\r\n\t      timePad(dt.getMonth()+1) +  '-' +\r\n\t      timePad(dt.getDate()) + ' ' +\r\n\t      timePad(dt.getHours()) + ':' +\r\n\t      timePad(dt.getMinutes())\r\n\t    }\r\n\t  </div>\r\n      )\r\n\r\n    else return (\r\n      <InputMoment\r\n\tmindate = { new Date() }\r\n\tmoment = { moment(this.state[target]) }\r\n\tonSave = { () => {\r\n\t    this.setState({\r\n\t      [`${target}Choosing`]: false,\r\n\t      dateError: undefined,\r\n\t    })\t    \r\n\t}}\r\n\tonChange = { newMoment => {\r\n\t    if (target === 'start' && newMoment.isAfter(this.state.end)) {\r\n\t      this.setState({\r\n\t\tdateError: 'Händelsen måste börja innan den slutar',\r\n\t      })\r\n\t      return\r\n\t    }\r\n\r\n\t    if (target === 'end' && newMoment.isBefore(this.state.start) ) {\r\n\t      this.setState({\r\n\t\tdateError: 'Händelsen får inte sluta innan den börjar',\r\n\t      })\r\n\t      return\r\n\t    }\r\n\r\n\t    this.setState({\r\n\t      [target]: newMoment.toDate(),\r\n\t      dateError: undefined,\r\n\t    })  \r\n\t}}\r\n\tminStep = { 5 }\r\n\thourStep = { 1 }\r\n\tprevMonthIcon = \"ion-ios-arrow-left\"\r\n\tnextMonthIcon = \"ion-ios-arrow-right\"\r\n      />\r\n    )\r\n  }\r\n\r\n  optionsTable = () => {\r\n\r\n    if (this.state.startChoosing || this.state.endChoosing) {\r\n      const target = this.state.startChoosing ? 'start' : 'end'\r\n  \r\n      return (\r\n\t<React.Fragment>\r\n\t  <div\r\n\t    style = {{\r\n\t      width: '100%',\r\n\t      textAlign: 'center',\r\n\t  }}>\r\n\t    <b>{ target === 'start' ? 'Börjar' : 'Slutar' }</b>\r\n\t  </div>\r\n\t  \r\n\t  { this.generalErrorPanel('dateError') }\r\n\t  \r\n\t  {\r\n\t    this.dateTimePicker({\r\n\t      trigger: true,\r\n\t      target: target,\r\n\t    })\r\n\t  }\r\n\t</React.Fragment>\r\n      )\r\n    }\r\n    \r\n    return (\r\n      <table>\r\n\t<tbody>\r\n\t  \r\n\t  <tr>\r\n\t    <td\r\n\t      style = {{\r\n\t\twidth: '50px',\r\n\t      }}\r\n\t    >\r\n\t      Färg\r\n\t    </td>\r\n\t    <td>\r\n\t      <ColorPicker\r\n\t      enableAlpha = { false }\r\n\t      animation = 'slide-up'\r\n\t      color = { this.state.eventColor }\r\n\t      onClose = { choice => {\r\n\t\t  this.setState({\r\n\t\t    eventColor: choice.color\r\n\t\t  })\r\n\t      }}\r\n\t      />\r\n\t    </td>\r\n\t  </tr>\r\n\r\n\t  <tr>\r\n\t    <td>Börjar</td>\r\n\t    <td>\r\n\t      {\r\n\t\tthis.dateTimePicker({\r\n\t\t  trigger: this.state.startChoosing,\r\n\t\t  target: 'start'\r\n\t\t})\r\n\t      }\r\n\t    </td>\r\n\t  </tr>\r\n\r\n\t  <tr>\r\n\t    <td>Slutar</td>\r\n\t    <td>\r\n\t      {\r\n\t\tthis.dateTimePicker({\r\n\t\t  trigger: this.state.endChoosing,\r\n\t\t  target: 'end'\r\n\t\t})\r\n\t      }\r\n\t    </td>\r\n\t  </tr>\r\n\t</tbody>\r\n      </table>\r\n    )\r\n  }\r\n\r\n  buttonsPanel = () => {\r\n    return (\r\n      <div\r\n\tstyle = {{\r\n\t  display: \"flex\",\r\n\t  justifyContent: \"space-between\",\r\n\t  marginBottom: '-3px',\r\n\t}}>\r\n\t<input\r\n\ttype = \"submit\"\r\n\tvalue = \"Spara\"\r\n\tstyle = {{\r\n\t  borderRadius: '0px 0px 0px 5px',\r\n\t}}\r\n\t/>\r\n\t<button\r\n\t  onClick = { this.props.closeModal }\r\n\t  style = {{\r\n\t    borderRadius: '0px 0px 5px 0px',\r\n\t  }}\r\n\t>\r\n\t  Avbryt\r\n\t</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    if (this.state.startChoosing || this.state.endChoosing)\r\n      return (\r\n\t<React.Fragment>\r\n\t{ this.generalErrorPanel('dateError') }\r\n\t{\r\n\t  this.dateTimePicker({\r\n\t    trigger: true,\r\n\t    target: this.state.startChoosing ? 'start' : 'end',\r\n\t  })\r\n\t}\r\n\t</React.Fragment>\r\n      )\r\n    \r\n    return (\r\n      <form\r\n      onSubmit = { ev => {\r\n\t    ev.preventDefault()\r\n\t    if (!this.state.customTitle || this.state.customTitle.length === 0) {\r\n\r\n\t      this.setState({\r\n\t\ttitleError: 'Titeln får inte vara tom',\r\n\t      })\r\n\t      return\r\n\t    }\r\n\r\n\t    if (this.props.event.id !== undefined) {\r\n\t      this.props.editEvent({\r\n\t\tid: this.props.event.id,\r\n\t\tcustomTitle: this.state.customTitle,\r\n\t\tstart: this.state.start,\r\n\t\tend: this.state.end,\r\n\t\tcolor: this.state.eventColor,\r\n\t\tresourceId: undefined,\r\n\t\tshiftId: undefined,\r\n\t      })\r\n\t      this.props.closeModal()\r\n\t    }\r\n\t    else { \r\n\t      this.props.addEvent({\r\n\t\tcustomTitle: this.state.customTitle,\r\n\t\tstart: this.state.start,\r\n\t\tend: this.state.end,\r\n\t\tcolor: this.state.eventColor,\r\n\t      })\r\n\t      this.props.closeModal()\r\n\t    }\r\n\t}}\r\n\t>\r\n\t\r\n\t<div style = {{\r\n\t  textAlign: \"center\",\r\n\t  fontWeight: \"bold\",\r\n\t  margin: '-8px 0px 6px 0px',\r\n\t}}\r\n\t>\r\n\t  { this.props.event.id === undefined ? 'Ny händelse' : 'Redigera händelse' }\r\n\t</div>\r\n\r\n\t<input\r\n\t  ref = { instance => this.titleInput = instance }\r\n\t  type = \"text\"\r\n\t  placeholder = { this.state.previousTitle }\r\n\t  value = { this.state.customTitle}\r\n\t  onChange = { event => {\r\n\t      let newError = undefined\r\n\t      if (event.target.value.length === 0)\r\n\t\tnewError = this.state.titleError\r\n\r\n\t      this.setState({\r\n\t\tcustomTitle: event.target.value,\r\n\t\ttitleError: newError,\r\n\t      })\r\n\t  }}\r\n\t  style = {{ padding: '4px' }}\r\n\t>\r\n\t</input>\r\n\r\n\t{ this.generalErrorPanel('titleError') }\r\n\t{ this.optionsTable() }\r\n\t{ this.buttonsPanel() }\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default EditEventModal\r\n","import React, { Component } from 'react'\r\nimport update from 'immutability-helper'\r\nimport Modal from 'react-modal'\r\n\r\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\r\nimport moment from 'moment'\r\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop'\r\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\r\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css'\r\n\r\nimport { loadResources, loadEvents, loadShifts,\r\n\t loadMetaData, storeData } from './storage'\r\n\r\nimport { moveEvent, addEvent, removeEvent,\r\n\t eventRender, getEventProp, addEvents } from './events'\r\n\r\nimport { create, archive, sortComparer, timeOverlap } from './utilities'\r\n\r\nimport './App.css'\r\n//import { storeTestData } from './testdata'\r\nimport ModalMenu from './modalmenu'\r\nimport PickerPanel from './pickerpanel'\r\nimport EditEventModal from './editeventmodal'\r\n\r\n\r\n// changing locale doesn't work without this\r\nimport 'moment/locale/sv'\r\n\r\nmoment.locale('sv')\r\nconst localizer = momentLocalizer(moment)\r\n\r\n// this one has to be capitalized(?)\r\nconst DragCalendar = withDragAndDrop(Calendar)\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    // read data from localStorage\r\n    const events = loadEvents()\r\n    const resources = loadResources()\r\n    const shifts = loadShifts()\r\n    const metaData = loadMetaData()\r\n\r\n    this.state = {\r\n      events: events,\r\n      resources: resources.sort(sortComparer('resources')),\r\n      shifts: shifts.sort(sortComparer('shifts')),\r\n      selected: {\r\n\tshift: shifts[0],\r\n\tresource: resources[0],\r\n      },\r\n      optionsModalOpen: false,\r\n      editEventModalOpen: false,\r\n      metaData: metaData,\r\n      view: 'month',\r\n      viewDate: new Date(),\r\n    }\r\n  }\r\n\r\n  setSelected = ({ shift, resource }) => {\r\n    this.setState({\r\n      selected: {\r\n\tshift: shift,\r\n\tresource: resource,\r\n      }\r\n    })    \r\n  }\r\n\r\n  updateElement = (newElement, type) => {\r\n\r\n    let index = this.state[type]\r\n\t\t    .findIndex(elem => elem.id === newElement.id)\r\n    if (type === 'resources' && index === -1)\r\n      index = this.state.metaData.archive\r\n\t\t  .findIndex(res => res.id === newElement.id)\r\n\r\n    const newList = update(this.state[type],\r\n\t\t\t   {$splice: [[index, true, newElement]]})\r\n    let newEventList = this.state.events\r\n\r\n    // if a shift is updated then all the events associated with it\r\n    // has to have their start and end dates updated\r\n    if (type === 'shifts') {\r\n      newEventList = this.state.events.map(event => {\r\n\tif (event.shiftId === newElement.id) {\r\n\t  event.start.setHours(newElement.startHour,\r\n\t\t\t       newElement.startMinute, 0)\r\n\t  event.end = moment(event.start)\r\n\t    .add(newElement.minuteLength, 'm')\r\n\t    .toDate()\r\n\t}\r\n\t\r\n\treturn event\r\n      })\r\n      \r\n      storeData(newEventList, 'events')\r\n    }\r\n\r\n    this.setState({\r\n      [type]: newList.sort(sortComparer(type)),\r\n      events: newEventList,\r\n    })\r\n    storeData(newList, type)\r\n  }\r\n\r\n\r\n  // TODO: add a context menu instead of removing the event straight away\r\n  render() {\r\n    // don't render the pickerPanel when in week mode so the app\r\n    // is slightly more usable on mobile devices since the panel\r\n    // isn't used in that mode anyway\r\n    \r\n    let pickerPanel = ''\r\n\r\n    if (this.state.view === 'month') {\r\n      pickerPanel = (\r\n\t<PickerPanel\r\n\t  resources = { this.state.resources }\r\n\t  shifts = { this.state.shifts }\r\n\t  selected = { this.state.selected }\r\n\t  setSelected = { this.setSelected }\r\n\t  optionsModalOpen = { this.state.optionsModalOpen }\r\n\t  setOptionsModal = { (value) => this.setState({\r\n\t      optionsModalOpen: value\r\n\t  }) }\r\n\t/>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div id = \"container\">\r\n\t<Modal\r\n\t  isOpen = { this.state.optionsModalOpen }\r\n\t  shouldCloseOnOverlayClick = { false }\r\n\t  className = \"modalCommon optionsMenuModal\"\r\n\t  overlayClassName = \"modalOverlayCommon\"\r\n\t  onAfterOpen = { () => document.getElementById('root')\r\n\t\t\t\t\t.style.filter = 'blur(2px)' }\r\n\t  onRequestClose = { () => {\r\n\t      document.getElementById('root').style.filter = ''\r\n\t      this.setState({ optionsModalOpen: false })\r\n\t  }}\r\n\t  ariaHideApp = { false }\r\n\t>\r\n\t  <ModalMenu\r\n\t    resources = { this.state.resources }\r\n\t    shifts = { this.state.shifts }\r\n\t    updateElement = { this.updateElement }\r\n\t    closeModal = { () => {\r\n\t\t// remove blur\r\n\t\tdocument.getElementById('root').style.filter = ''\r\n\t\tthis.setState({ optionsModalOpen: false })\r\n\t    }}\r\n\t    archive = { (element, type) => {\r\n\t\t// select another element when the currently selected\r\n\t\t// one gets removed\r\n\t\t\r\n\t\tconst newData = archive(element, type, this.state)\r\n\t\tconst replacement = this.state[type]\r\n\t\t\t\t\t.find(ele => ele.id !== element.id )\r\n\r\n\t\t// slice to go from 'resourceS' -> 'resource'\r\n\t\tthis.setState({\r\n\t\t  selected: update(this.state.selected,\r\n\t\t\t\t   {[type.slice(0,-1)]: {$set: replacement}}),\r\n\t\t  [type]: newData[type],\r\n\t\t  metaData: newData.metaData,\r\n\t\t})\r\n\r\n\t\tstoreData(newData[type], type)\r\n\t\tstoreData(newData.metaData, 'metaData')\r\n\t    }}\r\n\t  \r\n\t    create = { (element, type) => {\r\n\t\tlet created = create(element, type, this.state)\r\n\r\n\t\t// if it's the first resource or shift created then\r\n\t\t// make it selected\r\n\t\tif (!this.state.selected[type.slice(0,-1)]) {\r\n\t\t  this.setState({\r\n\t\t    selected: update(this.state.selected,\r\n\t\t\t\t     {[type.slice(0,-1)]: {$set: created.newElement }}),\r\n\t\t  })\r\n\t\t}\r\n\r\n\t\tthis.setState({ [type]: created.newElementList })\r\n\t\tstoreData(created.newElementList, type)\r\n\t    }}\r\n\r\n\t    insert = { newData => {\r\n\t\t// used in modalmenu to insert the new state from a\r\n\t\t// loaded file\r\n\t\t// TODO: display the created date somewhere\r\n\t\t// TODO: check version\r\n\r\n\t\tnewData.shifts.sort(sortComparer('shifts'))\r\n\t\tnewData.resources.sort(sortComparer('resources'))\r\n\r\n\t\tthis.setState({\r\n\t\t  events: newData.events,\r\n\t\t  shifts: newData.shifts,\r\n\t\t  resources: newData.resources,\r\n\t\t  metaData: newData.metaData,\r\n\t\t  selected: {\r\n\t\t    resource: newData.resources[0],\r\n\t\t    shift: newData.shifts[0]\r\n\t\t  }\r\n\t\t})\r\n\t\t\r\n\t    }}\r\n\t  />\r\n\t</Modal>\r\n\r\n\t<Modal\r\n\t  isOpen = { this.state.editEventModalOpen }\r\n\t  shouldCloseOnOverlayClick = { false }\r\n\t  className = \"modalCommon editEventModal\"\r\n\t  overlayClassName = \"modalOverlayCommon\"\r\n\t  onAfterOpen = { () => document.getElementById('root')\r\n\t\t\t\t\t.style.filter = 'blur(2px)' }\r\n\t  onRequestClose = { () => {\r\n\t      document.getElementById('root').style.filter = ''\r\n\t      this.setState({ editEventModalOpen: false })\r\n\t  }}\r\n\t  ariaHideApp = { false }\r\n\t>\r\n\t  <EditEventModal\r\n\t    addEvent = { newEvent => {\r\n\t\tconst newEventList = addEvent(newEvent, this.state.events)\r\n\r\n\t\tthis.setState({ events: newEventList })\r\n\t\tstoreData(newEventList, 'events')\r\n\t    }}\r\n\t    event = { this.state.eventBasis }\r\n\t    editEvent = { replacement => {\r\n\t\tconst index = this.state.events\r\n\t\t\t\t  .findIndex(ev => ev.id === replacement.id )\r\n\r\n\t\tconst newList = update(this.state.events,\r\n\t\t\t\t       {$splice: [[index, true, replacement]]})\r\n\r\n\t\tthis.setState({ events: newList })\r\n\t\tstoreData(newList, 'events')\r\n\t    }}\r\n\t    closeModal = { () => {\r\n\t\t// remove blur\r\n\t\tdocument.getElementById('root').style.filter = ''\r\n\t\tthis.setState({ editEventModalOpen: false })\r\n\t    }}\r\n\t  />\r\n\t</Modal>\r\n\r\n\t<div id = \"calendar\">\r\n\t  <DragCalendar\r\n\t    resizableAccessor={ () => false }\r\n\t    startAccessor = \"start\"\r\n\t    endAccessor = \"end\"\r\n\t    onDrillDown = { date => {\r\n\t\tconsole.log(date)\r\n\t\tthis.setState({\r\n\t\t  viewDate: date,\r\n\t\t  view: 'week',\r\n\t\t})\r\n\t    }}\r\n            localizer = { localizer }\r\n            events = { this.state.events }\r\n\t    onEventDrop = { (eventObj) => {\r\n\t\tconst newEventList = moveEvent(eventObj, this.state.events)\r\n\t\tthis.setState({ events: newEventList })\r\n\t\tstoreData(newEventList, 'events')\r\n\t    }}\r\n\t    onDragStart = { console.log }\r\n            onSelectSlot = { selection => {\r\n\t\tif (this.state.selected.resource === undefined\r\n\t\t    || this.state.selected.shift === undefined) {\r\n\t\t  return\r\n\t\t}\r\n\t\tif (this.state.view === 'month' ) {\r\n\t\t  const newEventList = addEvents(selection,\r\n\t\t\t\t\t\t this.state.events,\r\n\t\t\t\t\t\t this.state.selected)\r\n\t\t  this.setState({ events: newEventList })\r\n\t\t  storeData(newEventList, 'events')\r\n\t\t}\r\n\t\t\r\n\t\tif (this.state.view === 'week' ) {\r\n\t\t  this.setState({\r\n\t\t    editEventModalOpen: true,\r\n\t\t    eventBasis: {\r\n\t\t      start: selection.start,\r\n\t\t      end: selection.end,\r\n\t\t    }\r\n\t\t  })\r\n\t\t}\r\n\r\n\t    }}\r\n\t  \r\n\t    onDoubleClickEvent = { (event, e) => {\r\n\r\n\t\tconsole.log('dbl: ', this.state.resources)\r\n\t\tlet resolvedColor, resolvedTitle\r\n\r\n\t\t// custome events don't have resources associated with them\r\n\t\tif (event.customTitle !== undefined ) {\r\n\t\t  resolvedColor = event.color\r\n\t\t  resolvedTitle = event.title\r\n\t\t}\r\n\t\telse {\r\n\t\t  const resource = this.state.resources.find(res => res.id === event.resourceId)\r\n\t\t\t\t|| this.state.metaData.archive.resources\r\n\t\t\t\t       .find(res => res.id === event.resourceId )\r\n\t\t  const shift = this.state.shifts.find(sh => sh.id === event.shiftId)\r\n\t\t\t     || this.state.metaData.archive.shifts\r\n\t\t\t\t    .find(sh => sh.id === event.shiftId )\r\n\r\n\t\t  resolvedColor = resource.color\r\n\t\t  resolvedTitle = resource.title + ', ' + shift.title + '*'\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({\r\n\t\t  eventBasis: {\r\n\t\t    ...event,\r\n\t\t    color: resolvedColor,\r\n\t\t    title: resolvedTitle,\r\n\t\t  },\r\n\t\t  editEventModalOpen: true,\r\n\t\t})\r\n\t    }}\r\n            defaultView = { 'month' }\r\n\t    view = { this.state.view }\r\n            defaultDate = { this.state.viewDate }\r\n\t    date = { this.state.viewDate }\r\n\t    eventPropGetter = { (event, start, end, isSelected) => {\r\n\t\treturn getEventProp(event, start,\r\n\t\t\t\t    end, isSelected,\r\n\t\t\t\t    this.state)\r\n\t    }}\r\n\t    selectable = { 'ignoreEvents' }\r\n\t    views = { ['month', 'week'] }\r\n\t    onView = { view => {\r\n\t\tconsole.log(view)\r\n\t\tthis.setState({ view: view })\r\n\t    }}\r\n\t    onNavigate = { newDate => { this.setState({ viewDate: newDate }) }}\r\n\t    step = { 60 }\r\n\t    popup\r\n\t    components = {{\r\n\t      eventWrapper: ({event, children}) => (\r\n\t\t<div\r\n\t\t  onContextMenu = { e => {\r\n\t\t      const newEventList = removeEvent(event, this.state.events)\r\n\t\t      this.setState({ events: newEventList })\r\n\t\t      storeData(newEventList, 'events')\r\n\t\t      e.preventDefault()\r\n\t\t  }}>\r\n\t\t  { children }\r\n\t\t</div>\r\n\t      ),\r\n\t      event: args => { return eventRender(args, this.state) },\r\n\t      dateCellWrapper: cellProps => {\r\n\t\t\r\n\t\tconst style = {\r\n\t\t  display: 'flex',\r\n\t\t  position: 'relative',\r\n\t\t  flex: 1,\r\n\t\t  borderLeft: '1px solid #DDD',\r\n\t\t}\r\n\r\n\t\tlet calendarDay = {\r\n\t\t  start: cellProps.value,\r\n\t\t  end: moment(cellProps.value).endOf('day')\r\n\t\t}\r\n\t\t\r\n\t\tlet scheduledHours = 0\r\n\t\t\r\n\t\tthis.state.events.forEach(elem => {\r\n\t\t  scheduledHours += timeOverlap(calendarDay, {\r\n\t\t    start: moment(elem.start),\r\n\t\t    end: moment(elem.end),\r\n\t\t  })\r\n\t\t})\r\n\r\n\t\t// ms -> hours\r\n\t\tscheduledHours = scheduledHours / (60*60*1000)\r\n\r\n\t\tlet tag = ''\r\n\r\n\t\t// TODO: optimize this\r\n\t\tif (Math.round(scheduledHours) !== 0)\r\n\t\t  tag = (\r\n\t\t    <div className = 'dateCellTag'>\r\n\t\t      { scheduledHours.toFixed(1) + 'h'}\r\n\t\t    </div>\r\n\t\t  )\r\n\t\t\r\n\t\treturn (\r\n\t\t  <div\r\n\t\t    style={style}\r\n\t\t\t  onContextMenu = { e => {\r\n\t\t\t      e.preventDefault()\r\n\t\t\t  }}\r\n\t\t    >\r\n\t\t    { tag }\r\n\t\t    { cellProps.children }\r\n\t\t  </div>\r\n\t\t)\r\n\t      },\r\n\t    }}\r\n\t  />\r\n\t</div>\r\n\r\n\t{ pickerPanel }\r\n\t\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nfunction moveEvent ({ event, start, end, isAllDay: droppedOnAllDaySlot },\r\n\t\t    events) {\r\n\r\n  //console.log(event, start, end, droppedOnAllDaySlot)\r\n\r\n  const idx = events.findIndex(elem => elem.id === event.id)\r\n  const updatedEvent = { ...event, start, end, isAllDay: false }\r\n\r\n  const nextEvents = [...events]\r\n  nextEvents.splice(idx, 1, updatedEvent)\r\n\r\n  return nextEvents\r\n}\r\n\r\n// this will only ever be called from the month view\r\nfunction addEvents (allSelected, events, selected) {\r\n\r\n  // in case of empty lists\r\n  if (!selected.resource || !selected.shift)\r\n    return undefined\r\n\r\n  // find the largest and then increment to guarantee a unique event ID\r\n  let eventId = 0\r\n  events.forEach(event => {\r\n    if (event.id > eventId)\r\n      eventId = event.id\r\n  })\r\n\r\n  eventId += 1\r\n  let newEvents = []\r\n  \r\n  allSelected.slots.forEach(slot => {\r\n    let selectedShift = selected.shift\r\n    \r\n    let startDate = slot\r\n    startDate.setHours(selectedShift.startHour, selectedShift.startMinute, 0)\r\n    let stopDate = moment(startDate).add(selectedShift.minuteLength, 'm').toDate()\r\n    let newEvent = { \r\n      start: startDate,\r\n      end: stopDate,\r\n      allDay: false,\r\n      id: eventId,\r\n      resourceId: selected.resource.id,\r\n      shiftId: selected.shift.id,\r\n    }\r\n    newEvents.push(newEvent)\r\n    eventId++\r\n  })\r\n\r\n  return events.concat(newEvents)\r\n\r\n}\r\n\r\nfunction addEvent(event, events) {\r\n\r\n  // find the largest and then increment to guarantee a unique event ID\r\n  let eventId = 0\r\n  events.forEach(ev => {\r\n    if (ev.id > eventId)\r\n      eventId = ev.id\r\n  })\r\n\r\n  event.id = eventId + 1\r\n  return events.concat(event)\r\n}\r\n\r\nfunction removeEvent (target, events) {\r\n  const newEventList = events.filter(elem => elem.id !== target.id)\r\n  return newEventList\r\n}\r\n\r\nfunction eventRender ({ event }, state) {\r\n\r\n  if (event.customTitle !== undefined) {\r\n    return (\r\n      <div>\r\n\t{ event.customTitle }\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  let resource = state.resources.find(res => res.id === event.resourceId)\r\n  if (resource === undefined)\r\n    resource = state.metaData.archive.resources\r\n    .find(res => res.id === event.resourceId)\r\n\r\n  let shift = state.shifts.find(sh => sh.id === event.shiftId)\r\n  if (shift === undefined)\r\n    shift = state.metaData.archive.shifts\r\n    .find(sh => sh.id === event.shiftId)\r\n  \r\n  return (\r\n      <div>\r\n\t{ resource.title + ', ' + shift.title }\r\n      </div>\r\n  )\r\n}\r\n\r\n\r\n// TODO: make a gradient background and let the rightmost part represent shift\r\n//       and the rest the resource\r\nfunction getEventProp (event, start, end, isSelected, state) {\r\n\r\n  // custom events don't have resources/shifts linked to them\r\n  if (event.customTitle !== undefined) {\r\n    return {\r\n      style: {\r\n\tbackground: event.color,\r\n\tcursor: 'grab',\r\n      },\r\n      className: 'eventPanel',\r\n    }\r\n  }\r\n  \r\n  let resource = state.resources.find(res => res.id === event.resourceId)\r\n\r\n  // in case a resource has been removed\r\n  if (resource === undefined)\r\n    resource = state.metaData.archive.resources.find(res => res.id === event.resourceId)\r\n\r\n  if (!resource) {\r\n    console.log('no resource found: ', event)\r\n    console.log(state.resources)\r\n    return ''\r\n  }\r\n\r\n  return {\r\n    style: {\r\n      background: resource.color,\r\n      cursor: 'grab',\r\n    },\r\n    className: 'eventPanel',\r\n  }\r\n}\r\n\r\n\r\nexport {\r\n  moveEvent,\r\n  removeEvent,\r\n  eventRender,\r\n  getEventProp,\r\n  addEvent,\r\n  addEvents,\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n"],"sourceRoot":""}